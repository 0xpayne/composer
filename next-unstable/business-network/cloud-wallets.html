<!doctype html>
<html lang="en">
  
  
  

<head>
  <meta charset="utf-8">
  
    <title>Cloud Storage for Business Network Cards | Hyperledger Composer</title>
  
  <meta name="viewport" content="width=device-width">
  <link rel="icon" type="image/x-icon" href="/composer/next-unstable/favicon.ico">
  <meta name="google-site-verification" content="fBQRJ6h7MV7_TJ7grbgq4P-d-07NRfDWPe4pqEEoH5w">
  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">

  
    <!-- Google Analytics -->
<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-91314349-2', 'auto');
ga('require', 'outboundLinkTracker');
ga('require', 'eventTracker');
ga('send', 'pageview');
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
<script async src="/composer/next-unstable/assets/js/autotrack.js"></script>
<!-- End Google Analytics -->

  

  
    <link href="/composer/next-unstable/assets/css/normalize.css" rel="stylesheet">
    <link href="/composer/next-unstable/assets/css/new-style.min.css" rel="stylesheet">
    <link href="/composer/next-unstable/assets/css/grid-layout.min.css" rel="stylesheet">
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.6.0/clipboard.min.js"></script>
  
</head>


<body class="">

  
  <!-- % include navbar.html % -->
  

  <div class="SiteWrapper">
    
      <div class="content">
    <article class="docs-container">
        <!-- If there's a sidebar, divide into 2 columns -->
        
        <div class="page-sidebar-grid" id="off-canvas">
          <!-- <a class="toggle close" href="#">close</a> -->
          <div class="docs-pagenav-grid">
            <!-- Navigation -->
  <nav class="navbar-docs" role="navigation">
        <!-- Brand and toggle get grouped for better mobile display -->
            <a class="navbar-brand" href="/composer/next-unstable/index.html"><b>Hyperledger</b> Composer</a>
        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <div class="top-nav-docs">
                <!-- <li>
                    <a href="services.html">Composer</a>
                </li> -->
                <!-- <li>
                    <a href="https://composer-playground.mybluemix.net/">Playground</a>
                </li> -->
                    <a href="../tutorials/tutorials.html">Tutorials</a>
                    <a href="../introduction/introduction.html">Docs</a>
                    <a href="../support/support-index.html">Community</a>
            </div>
        </div>
</nav>

          </div>

            <div class="search-form">
              <form action="/composer/next-unstable/search/search.html" method="get">
                <!-- <label for="search-box">Search</label> -->

                <input type="text" id="search-box"  class="search-box" name="query" placeholder="Search here...">
                <input type="submit" class="submit-input hide" value="">

                <div class="search-icon">
                  <img src="/composer/next-unstable/assets/img/Search_Icon_1.svg" class="trigger" type="submit">
                </div>
              </form>
            </div>

          <div class="docs-current-page-grid">
          <p>Cloud Storage for Business Network Cards</p>
          </div>

          <nav class="context-nav">
            
            
              <ul>
<li><p><a href="/composer/next-unstable/introduction/introduction"><b>Introduction</b><img src="/composer/next-unstable/assets/img/Caret_SW_2.svg" class="caret"></a></p>

<ul>
<li><a href="/composer/next-unstable/introduction/key-concepts">Key Concepts</a></li>
<li><a href="/composer/next-unstable/introduction/solution-architecture">Typical Solution Architecture</a></li>
</ul></li>
<li><p><a href="/composer/next-unstable/installing/installing-index"><b>Installing</b><img src="/composer/next-unstable/assets/img/Caret_SW_2.svg" class="caret"></a></p>

<ul>
<li><a href="/composer/next-unstable/installing/installing-prereqs">Installing pre-requisites</a></li>
<li><a href="/composer/next-unstable/installing/development-tools">Installing the development environment</a></li>
</ul></li>
<li><p><a href="/composer/next-unstable/tutorials/tutorials"><b>Tutorials</b><img src="/composer/next-unstable/assets/img/Caret_SW_2.svg" class="caret"></a></p>

<ul>
<li><a href="/composer/next-unstable/tutorials/playground-tutorial">Playground Tutorial</a></li>
<li><a href="/composer/next-unstable/tutorials/developer-tutorial">Developer Tutorial</a></li>
<li><a href="/composer/next-unstable/tutorials/queries">Queries Tutorial</a></li>
<li><a href="/composer/next-unstable/tutorials/deploy-to-fabric-single-org">Deploying to a single organization Hyperledger Fabric</a></li>
<li><a href="/composer/next-unstable/tutorials/deploy-to-fabric-multi-org">Deploying to a multi-organization Hyperledger Fabric</a></li>
<li><a href="/composer/next-unstable/tutorials/invoke-composer-network">Invoking a Composer business network from another business network using Hyperledger Fabric</a></li>
<li><a href="/composer/next-unstable/tutorials/acl-trading">Access Control Tutorial - Commodity Trading</a></li>
</ul></li>
<li><p><a href="/composer/next-unstable/playground/playground-index"><b>Using Playground</b><img src="/composer/next-unstable/assets/img/Caret_SW_2.svg" class="caret"></a></p>

<ul>
<li><a href="/composer/next-unstable/playground/id-cards-playground">Business Network Cards</a></li>
</ul></li>
<li><p><a href="/composer/next-unstable/business-network/business-network-index"><b>Developing Business Networks</b><img src="/composer/next-unstable/assets/img/Caret_SW_2.svg" class="caret"></a></p>

<ul>
<li><a href="/composer/next-unstable/business-network/businessnetworkdefinition">Business Network Definitions</a></li>
<li><a href="/composer/next-unstable/business-network/bnd-create">Create a Business Network Definition</a></li>
<li><a href="/composer/next-unstable/business-network/bnd-deploy">Deploying Business Networks</a></li>
<li><a href="/composer/next-unstable/business-network/publishing-events">Emitting Events</a></li>
<li><a href="/composer/next-unstable/business-network/testing">Testing Business Networks</a></li>
<li><a href="/composer/next-unstable/business-network/bnd-publish">Publish Models or Business Network Definitions</a></li>
<li><a href="/composer/next-unstable/business-network/query">Using Queries and Filters with Business Network Data</a></li>
<li><a href="/composer/next-unstable/business-network/programmatic-access-control">Programmatic access control</a></li>
<li><a href="/composer/next-unstable/business-network/historian">Hyperledger Composer Historian</a></li>
<li><a href="/composer/next-unstable/business-network/cloud-wallets">Cloud Storage for Business Network Cards</a></li>
</ul></li>
<li><p><a href="/composer/next-unstable/applications/applications-index"><b>Developing Applications</b><img src="/composer/next-unstable/assets/img/Caret_SW_2.svg" class="caret"></a></p>

<ul>
<li><a href="/composer/next-unstable/applications/node">Writing a Node.js application</a></li>
<li><a href="/composer/next-unstable/applications/web">Writing Web applications</a></li>
<li><a href="/composer/next-unstable/applications/subscribing-to-events">Subscribing to events</a></li>
</ul></li>
<li><p><a href="/composer/next-unstable/integrating/integrating-index"><b>Integrating Existing Systems</b><img src="/composer/next-unstable/assets/img/Caret_SW_2.svg" class="caret"></a></p>

<ul>
<li><a href="/composer/next-unstable/integrating/getting-started-rest-api">Generating a REST API</a></li>
<li><a href="/composer/next-unstable/integrating/publishing-events">Publishing events from the REST server</a></li>
<li><a href="/composer/next-unstable/integrating/enabling-rest-authentication">Enabling authentication for the REST server</a></li>
<li><a href="/composer/next-unstable/integrating/enabling-multiuser">Enabling multiple user mode for the REST server</a></li>
<li><a href="/composer/next-unstable/integrating/securing-the-rest-server">Securing the REST server using HTTPS and TLS</a></li>
<li><a href="/composer/next-unstable/integrating/deploying-the-rest-server">Deploying the REST server for a business network</a></li>
<li><a href="/composer/next-unstable/integrating/node-red">Integrating with Node-RED</a></li>
<li><a href="/composer/next-unstable/integrating/call-out">Calling external REST services</a></li>
</ul></li>
<li><p><a href="/composer/next-unstable/managing/managingindex"><b>Managing a Deployed Business Network</b><img src="/composer/next-unstable/assets/img/Caret_SW_2.svg" class="caret"></a></p>

<ul>
<li><a href="/composer/next-unstable/managing/participantsandidentities">Participants and identities</a></li>
<li><a href="/composer/next-unstable/managing/participant-add">Adding participants</a></li>
<li><a href="/composer/next-unstable/managing/id-cards-playground">Creating, Exporting, and Importing Business Network Cards</a></li>
<li><a href="/composer/next-unstable/managing/identity-issue">Issuing a new identity to a participant</a></li>
<li><a href="/composer/next-unstable/managing/identity-bind">Binding an existing identity to a participant</a></li>
<li><a href="/composer/next-unstable/managing/identity-list">Listing all identities in a business network</a></li>
<li><a href="/composer/next-unstable/managing/identity-revoke">Revoking an identity from a participant</a></li>
<li><a href="/composer/next-unstable/managing/updating-composer">Updating the Hyperledger Composer Runtime</a></li>
<li><a href="/composer/next-unstable/managing/connector-information">Interacting with Hyperledger Fabric</a></li>
</ul></li>
<li><p><a href="/composer/next-unstable/problems/diagnostics"><b>Diagnosing Problems</b><img src="/composer/next-unstable/assets/img/Caret_SW_2.svg" class="caret"></a></p></li>
<li><p><a href="/composer/next-unstable/reference/reference-index"><b>Reference</b><img src="/composer/next-unstable/assets/img/Caret_SW_2.svg" class="caret"></a></p>

<ul>
<li><a href="/composer/next-unstable/reference/MeetTheModules">Hyperledger Composer npm Modules</a></li>
<li><a href="/composer/next-unstable/reference/cto_language">Modeling Language</a></li>
<li><a href="/composer/next-unstable/reference/acl_language">Access Control Language</a></li>
<li><a href="/composer/next-unstable/reference/query-language">Query Language</a></li>
<li><a href="/composer/next-unstable/reference/model-compatibility">Model Compatibility</a></li>
<li><a href="/composer/next-unstable/reference/connectionprofile">Connection Profiles</a></li>
<li><a href="/composer/next-unstable/reference/js_scripts">Transaction Processor Functions</a></li>
<li><a href="/composer/next-unstable/reference/commands">Hyperledger Composer CLI Commands</a></li>
<li><a href="/composer/next-unstable/reference/rest-server">Hyperledger Composer REST Server</a></li>
<li><a href="/composer/next-unstable/reference/glossary">Hyperledger Composer Glossary of Terms</a></li>
</ul></li>
<li><p><a href="/composer/next-unstable/support/support-index"><b>Support</b><img src="/composer/next-unstable/assets/img/Caret_SW_2.svg" class="caret"></a></p></li>
<li><p><a href="/composer/next-unstable/api/api-doc-index"><b>API Reference</b><img src="/composer/next-unstable/assets/img/Caret_SW_2.svg" class="caret"></a></p>

<ul>
<li><a href="/composer/next-unstable/api/allData">API Class Index</a></li>
<li><a href="/composer/next-unstable/api/admin-adminconnection">AdminConnection (Admin API)</a></li>
<li><a href="/composer/next-unstable/api/client-assetregistry">AssetRegistry (Client API)</a></li>
<li><a href="/composer/next-unstable/api/client-businessnetworkconnection">BusinessNetworkConnection (Client API)</a></li>
<li><a href="/composer/next-unstable/api/client-historian">Historian (Client API)</a></li>
<li><a href="/composer/next-unstable/api/client-identityregistry">IdentityRegistry (Client API)</a></li>
<li><a href="/composer/next-unstable/api/client-participantregistry">ParticipantRegistry (Client API)</a></li>
<li><a href="/composer/next-unstable/api/client-query">Query (Client API)</a></li>
<li><a href="/composer/next-unstable/api/client-registry">Registry (Client API)</a></li>
<li><a href="/composer/next-unstable/api/client-transactionregistry">TransactionRegistry (Client API)</a></li>
<li><a href="/composer/next-unstable/api/common-assetdeclaration">AssetDeclaration (Common API)</a></li>
<li><a href="/composer/next-unstable/api/common-businessnetworkcardstore">BusinessNetworkCardStore (Common API)</a></li>
<li><a href="/composer/next-unstable/api/common-businessnetworkdefinition">BusinessNetworkDefinition (Common API)</a></li>
<li><a href="/composer/next-unstable/api/common-businessnetworkmetadata">BusinessNetworkMetadata (Common API)</a></li>
<li><a href="/composer/next-unstable/api/common-classdeclaration">ClassDeclaration (Common API)</a></li>
<li><a href="/composer/next-unstable/api/common-conceptdeclaration">ConceptDeclaration (Common API)</a></li>
<li><a href="/composer/next-unstable/api/common-concept">Concept (Common API)</a></li>
<li><a href="/composer/next-unstable/api/common-enumdeclaration">EnumDeclaration (Common API)</a></li>
<li><a href="/composer/next-unstable/api/common-enumvaluedeclaration">EnumValueDeclaration (Common API)</a></li>
<li><a href="/composer/next-unstable/api/common-eventdeclaration">EventDeclaration (Common API)</a></li>
<li><a href="/composer/next-unstable/api/common-factory">Factory (Common API)</a></li>
<li><a href="/composer/next-unstable/api/common-filesystemcardstore">FileSystemCardStore (Common API)</a></li>
<li><a href="/composer/next-unstable/api/common-functiondeclaration">FunctionDeclaration (Common API)</a></li>
<li><a href="/composer/next-unstable/api/common-idcard">IdCard (Common API)</a></li>
<li><a href="/composer/next-unstable/api/common-identifiable">Identifiable (Common API)</a></li>
<li><a href="/composer/next-unstable/api/common-introspector">Introspector (Common API)</a></li>
<li><a href="/composer/next-unstable/api/common-memorycardstore">MemoryCardStore (Common API)</a></li>
<li><a href="/composer/next-unstable/api/common-modelfile">ModelFile (Common API)</a></li>
<li><a href="/composer/next-unstable/api/common-modelmanager">ModelManager (Common API)</a></li>
<li><a href="/composer/next-unstable/api/common-participantdeclaration">ParticipantDeclaration (Common API)</a></li>
<li><a href="/composer/next-unstable/api/common-property">Property (Common API)</a></li>
<li><a href="/composer/next-unstable/api/common-relationshipdeclaration">RelationshipDeclaration (Common API)</a></li>
<li><a href="/composer/next-unstable/api/common-relationship">Relationship (Common API)</a></li>
<li><a href="/composer/next-unstable/api/common-resource">Resource (Common API)</a></li>
<li><a href="/composer/next-unstable/api/common-serializer">Serializer (Common API)</a></li>
<li><a href="/composer/next-unstable/api/common-transactiondeclaration">TransactionDeclaration (Common API)</a></li>
<li><a href="/composer/next-unstable/api/common-typed">Typed (Common API)</a></li>
<li><a href="/composer/next-unstable/api/common-validatedconcept">ValidatedConcept (Common API)</a></li>
<li><a href="/composer/next-unstable/api/common-validatedresource">ValidatedResource (Common API)</a></li>
<li><a href="/composer/next-unstable/api/runtime-api">Api (Runtime API)</a></li>
<li><a href="/composer/next-unstable/api/runtime-assetregistry">AssetRegistry (Runtime API)</a></li>
<li><a href="/composer/next-unstable/api/runtime-factory">Factory (Runtime API)</a></li>
<li><a href="/composer/next-unstable/api/runtime-participantregistry">ParticipantRegistry (Runtime API)</a></li>
<li><a href="/composer/next-unstable/api/runtime-query">Query (Runtime API)</a></li>
<li><a href="/composer/next-unstable/api/runtime-serializer">Serializer (Runtime API)</a></li>
</ul></li>
</ul>

            
                <div class="docs-footer-grid">
                <div class="footer-bg-break docs-footer-break">
<div class="footer-container-break">
    <div class="footer-left-break">
      <p>Released under the Apache License v2.0</p>
    </div>
  <div class="footer-right-break">
    <ul>
      <li><a href="https://github.com/hyperledger/composer">GitHub</a></li>
      <li><a href="http://stackoverflow.com/questions/tagged/fabric-composer">Stack Overflow</a></li>
      
      <li><a href="https://hyperledger.github.io/composer/latest">Latest (Unstable) Docs</a></li>
      <li><a href="https://hyperledger.github.io/composer/stable">Stable (Supported) Docs</a></li>
           
    </ul>
  </div>
</div>
</div>

                </div>
          </nav>
        </div>
        <div class="page-content-grid">
          <section class="content-chunk">
            <!-- <a class="toggle open" href="#nav">open</a> -->
            
              <h1 id="cloud-storage-for-business-network-cards">Cloud Storage for Business Network Cards</h1>

<p>Business network cards can be stored in a local wallet or a cloud wallet. The local wallet is the default and can be found in the <code>/home/username/.composer</code> directory, however, local wallets can be problematic for applications running in cloud environments. By using cloud wallets, users can control where business network cards and the certificates and private keys used for Hyperledger Fabric authentication are stored.</p>

<blockquote>
<p>Please note: any custom cloud wallet implementations <strong>must</strong> include the <code>composer-wallet</code> prefix in the module name.</p>
</blockquote>

<h2 id="high-level-architecture">High level architecture</h2>

<p>Whenever a <code>BusinessNetworkConnection</code> or <code>AdminConnection</code> is made, it has an associated <code>CardStore</code>. Each connection can be configured to use a specific <code>CardStore</code>. In the Hyperledger Composer repository, there are two pre-configured options for stores:</p>

<ul>
<li><code>composer-wallet-filesystem</code></li>
<li><code>composer-wallet-inmemory</code></li>
</ul>

<p>A single implementation of a backend store can be used for both business network cards and Hyperledger Fabric private keys and certificates. The store configuration can be done using either a configuration file, or by using environment variables. Custom implementations can be written for any given backend database or object store. The following two GitHub repositories contain implementations of cloud wallets using the IBM Cloud Object Store and Redis, respectively.</p>

<ul>
<li><a href="https://github.com/ampretia/composer-wallet-ibmcos">@ampretia/composer-wallet-ibmcos</a>  - provides a backing store using the IBM Cloud Object Store. This has an S3 compatible API</li>
<li><a href="https://github.com/ampretia/composer-wallet-redis">@ampretia/composer-wallet-redis</a>   - provides a backing store using a Redis server</li>
</ul>

<p>Multiple cloud wallet implementations can be installed using global npm installs.</p>

<p>For more details of the writing a new cloud wallet implementation, see the following <a href="https://github.com/ampretia/composer-wallet-ibmcos">README</a>.</p>

<h2 id="configuring-a-cloud-wallet-connection">Configuring a cloud wallet connection</h2>

<p>There are two ways to define the configuration for a cloud wallet, by using a <code>.json</code> config file, or by defining environment variables.</p>

<h3 id="configuring-a-cloud-wallet-using-a-configuration-file">Configuring a cloud wallet using a configuration file</h3>

<p>For production deployments, it is more useful to be able to configure the card store outside of the application,
Hyperledger Composer uses the standard configuration module <code>config</code>. The configuration file is loaded from a sub-directory of the current working directory called <code>config</code>.  The default configuration file is called <code>default.json</code>, the configuration file name can be changed using the <code>NODE_ENV</code> environment variable.</p>

<p>The following configuration file uses the IBM Cloud Object Store format as an example:</p>
<div class="highlight"><pre><code class="language-" data-lang="">{
  "composer": {
    "wallet": {
      "type": "@ampretia/composer-wallet-ibmcos",
      "desc": "Uses the IBM Cloud Object Store",
      "options": {
        "bucketName": "alpha-metal",
        "endpoint": "s3.eu-gb.objectstorage.softlayer.net",
        "apikey": "0viPHOY7LbLNa9eLftrtHPpTjoGv6hbLD1QalRXikliJ",
        "serviceInstanceId": "crn:v1:bluemix:public:cloud-object-storage:global:a/3ag0e9402tyfd5d29761c3e97696b71n:d6f74k03-6k4f-4a82-b165-697354o63903::"
      }
    }
  }
}
</code></pre></div>
<ul>
<li><code>type</code> is the name of this module</li>
<li><code>desc</code> is some text for the humans</li>
<li><code>bucketName</code> is the buckName you created</li>
<li><code>endpoint</code> is the <em>Service Endpoint</em> from the <em>Endpoint</em> section in the Object Store dashboard</li>
<li><code>apikey</code> is the API key from the service credentials</li>
<li><code>serviceInstanceId</code> is the <em>resource_instance_id</em> from the service credentials</li>
</ul>

<blockquote>
<p>Note that each connection will have a new instance of the card store specified. If these resolve to the same backend store cards can be shared.</p>
</blockquote>

<h3 id="configuring-a-cloud-wallet-using-an-environment-variable">Configuring a cloud wallet using an environment variable</h3>

<p>As this is using the <code>config</code> module specifying the details on the command line via environment variables can be achieved by setting an environment variable containing the same information as the configuration file.</p>

<p>The following environment variable example uses the same format and data as the preceding configuration file.</p>
<div class="highlight"><pre><code class="language-" data-lang="">export NODE_CONFIG={"composer":{"wallet":{"type":"@ampretia/composer-wallet-ibmcos","desc":"Uses the IBM Cloud Object Store","options":{"bucketName":"alpha-metal","endpoint":"s3.eu-gb.objectstorage.softlayer.net","apikey":"0viPHOY7LbLNa9eLftrtHPpTjoGv6hbLD1QalRXikliJ","serviceInstanceId":"crn:v1:bluemix:public:cloud-object-storage:global:a/3ag0e9402tyfd5d29761c3e97696b71n:d6f74k03-6k4f-4a82-b165-697354o63903::"}}}}
</code></pre></div>
<p>Any application that is in this shell will use the cloud wallets.</p>

<h2 id="migrating-to-a-cloud-wallet-from-a-file-system-wallet">Migrating to a cloud wallet from a file system wallet</h2>

<p>To migrate to either the IBM Cloud Object Store or Redis cloud wallet solutions, refer to the README files of the relevant GitHub repository.</p>

<p>In a general sense, migrating to a cloud wallet implementation has three steps.</p>

<ol>
<li>Export the business network cards you wish to use in the cloud wallet.</li>
<li>Change configuration to specify the cloud wallet.</li>
<li>Import the business network cards into the cloud wallet.</li>
</ol>

<p>The <code>composer-wallet-filesystem</code> is the default card store and follows the same layout on disc, and by default is in the same location.</p>

<p>Some samples and test cases show the card stores being created programmatically. This is still possible and but is slightly different in terms of initial creation of the card store.</p>

<h2 id="using-cloud-wallets-with-apis">Using cloud wallets with APIs</h2>

<p>Using the file system card store remains the default option, and in the absence of other configuration, has not changed.</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript">        <span class="nx">adminConnection</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AdminConnection</span><span class="p">();</span>
        <span class="nx">clientConnection</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BusinessNetworkConnection</span><span class="p">();</span>
</code></pre></div>
<p>This will use the file system card store at the location <code>/home/username/.composer</code></p>

<h3 id="api-memorycardstore-configuration">API MemoryCardStore configuration</h3>

<p>Previously to use the in MemoryCardStore, the code would have been written</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript">        <span class="nx">cardStore</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">MemoryCardStore</span><span class="p">();</span>
        <span class="kd">const</span> <span class="nx">adminConnectionOptions</span> <span class="o">=</span> <span class="p">{</span>
            <span class="na">cardStore</span> <span class="p">:</span> <span class="nx">cardStore</span>
        <span class="p">};</span>
        <span class="nx">adminConnection</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AdminConnection</span><span class="p">(</span><span class="nx">adminConnectionOptions</span><span class="p">);</span>
        <span class="c1">// or more concisely</span>
        <span class="nx">clientConnection</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BusinessNetworkConnection</span><span class="p">({</span><span class="nx">cardStore</span><span class="p">});</span>
</code></pre></div>
<p>Card stores must now be specified differently. There are two approaches using the API, the second approach permits the card store to be kept and used in a different connection.</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript">        <span class="kd">const</span> <span class="nx">adminConnectionOptions</span> <span class="o">=</span> <span class="p">{</span> <span class="na">wallet</span> <span class="p">:</span> <span class="p">{</span> <span class="na">type</span><span class="p">:</span> <span class="s1">'composer-wallet-inmemory'</span> <span class="p">}</span> <span class="p">};</span>
        <span class="nx">adminConnection</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AdminConnection</span><span class="p">(</span><span class="nx">adminConnectionOptions</span><span class="p">);</span>

        <span class="c1">// alternatively...</span>

        <span class="kd">const</span> <span class="nx">NetworkCardStoreManager</span><span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'composer-common'</span><span class="p">).</span><span class="nx">NetworkCardStoreManager</span><span class="p">;</span>
        <span class="kd">const</span> <span class="nx">cardStore</span> <span class="o">=</span> <span class="nx">NetworkCardStoreManager</span><span class="p">.</span><span class="nx">getCardStore</span><span class="p">(</span> <span class="p">{</span> <span class="na">type</span><span class="p">:</span> <span class="s1">'composer-wallet-inmemory'</span> <span class="p">}</span> <span class="p">);</span>
        <span class="kd">let</span> <span class="nx">adminConnection</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AdminConnection</span><span class="p">({</span> <span class="nx">cardStore</span> <span class="p">});</span>
</code></pre></div>
<h2 id="configuring-file-system-card-stores">Configuring file system card stores</h2>

<p>The location of the file system card store can now be changed using a configuration file or specified as a variable in an API call.</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript">
        <span class="kd">const</span> <span class="nx">adminConnectionOptions</span> <span class="o">=</span> <span class="p">{</span>
            <span class="na">wallet</span> <span class="p">:</span> <span class="p">{</span>
                <span class="na">type</span><span class="p">:</span> <span class="s1">'composer-wallet-filesystem'</span><span class="p">,</span>
                <span class="na">options</span> <span class="p">:</span> <span class="p">{</span>
                    <span class="na">storePath</span> <span class="p">:</span><span class="s1">'/my/network/location'</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">};</span>
        <span class="nx">adminConnection</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AdminConnection</span><span class="p">(</span><span class="nx">adminConnectionOptions</span><span class="p">);</span>
</code></pre></div>
<p>Alternatively, this can be specified in a configuration file.</p>
<div class="highlight"><pre><code class="language-" data-lang="">{
  "composer": {
    "wallet" : {
        "type": "composer-wallet-filesystem",
        "options" : {
            "storePath" : "/my/network/location"
        }
    }
}
</code></pre></div>
            
          </section>
        </div>
        <!-- Otherwise, have the main content fill all 12 columns... -->
        
      <div class="PageNavigation">
    
    
  </div>
    </article>
</div>
<script>
(function (document) {
    function clipboard_init() {
        var charts = document.querySelectorAll("div.highlight"),
            arr = [],
            i, j, maxItem, pre, btn, el;

        // Make sure we are dealing with an array
        for(i = 0, maxItem = charts.length; i < maxItem; i++) arr.push(charts[i]);

        // Find the UML source element and get the text
        for (i = 0, maxItem = arr.length; i < maxItem; i++) {
            el = arr[i];
            pre = el.childNodes[0];

            pre.id = "hl_code" + i.toString();
            btn = document.createElement('copy-button');
            btn.appendChild(document.createTextNode('Copy'));
            btn.setAttribute("class", "copy-btn");
            btn.setAttribute("data-clipboard-target", "#hl_code" + i.toString());
            el.insertBefore(btn, pre);
        }
        new Clipboard('.copy-btn');
    };

    function onReady(fn) {
        if (document.addEventListener) {
            document.addEventListener('DOMContentLoaded', fn);
        } else {
            document.attachEvent('onreadystatechange', function() {
                if (document.readyState === 'interactive')
                    fn();
            });
        }
    }

    onReady(function(){
        clipboard_init();
    });
})(document);
</script>
<script src="/composer/next-unstable/assets/js/nav.js"></script>
<script src="/composer/next-unstable/assets/js/search_bar.js"></script>

    

    


  </div>
</body>
</html>
