<!doctype html>
<html lang="en">
  
  
  

<head>
  <meta charset="utf-8">
  
    <title>Diagnosing Problems | Hyperledger Composer</title>
  
  <meta name="viewport" content="width=device-width">
  <link rel="icon" type="image/x-icon" href="/composer/next-unstable/favicon.ico">
  <meta name="google-site-verification" content="fBQRJ6h7MV7_TJ7grbgq4P-d-07NRfDWPe4pqEEoH5w">
  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">

  
    <!-- Google Analytics -->
<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-91314349-2', 'auto');
ga('require', 'outboundLinkTracker');
ga('require', 'eventTracker');
ga('send', 'pageview');
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
<script async src="/composer/next-unstable/assets/js/autotrack.js"></script>
<!-- End Google Analytics -->

  

  
    <link href="/composer/next-unstable/assets/css/normalize.css" rel="stylesheet">
    <link href="/composer/next-unstable/assets/css/new-style.min.css" rel="stylesheet">
    <link href="/composer/next-unstable/assets/css/grid-layout.min.css" rel="stylesheet">
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.6.0/clipboard.min.js"></script>
  
</head>


<body class="">

  
  <!-- % include navbar.html % -->
  

  <div class="SiteWrapper">
    
      <div class="content">
    <article class="docs-container">
        <!-- If there's a sidebar, divide into 2 columns -->
        
        <div class="page-sidebar-grid" id="off-canvas">
          <!-- <a class="toggle close" href="#">close</a> -->
          <div class="docs-pagenav-grid">
            <!-- Navigation -->
  <nav class="navbar-docs" role="navigation">
        <!-- Brand and toggle get grouped for better mobile display -->
            <a class="navbar-brand" href="/composer/next-unstable/index.html"><b>Hyperledger</b> Composer</a>
        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <div class="top-nav-docs">
                <!-- <li>
                    <a href="services.html">Composer</a>
                </li> -->
                <!-- <li>
                    <a href="https://composer-playground.mybluemix.net/">Playground</a>
                </li> -->
                    <a href="../tutorials/tutorials.html">Tutorials</a>
                    <a href="../introduction/introduction.html">Docs</a>
                    <a href="../support/support-index.html">Community</a>
            </div>
        </div>
</nav>

          </div>

            <div class="search-form">
              <form action="/composer/next-unstable/search/search.html" method="get">
                <!-- <label for="search-box">Search</label> -->

                <input type="text" id="search-box"  class="search-box" name="query" placeholder="Search here...">
                <input type="submit" class="submit-input hide" value="">

                <div class="search-icon">
                  <img src="/composer/next-unstable/assets/img/Search_Icon_1.svg" class="trigger" type="submit">
                </div>
              </form>
            </div>

          <div class="docs-current-page-grid">
          <p>Diagnosing Problems</p>
          </div>

          <nav class="context-nav">
            
            
              <ul>
<li><p><a href="/composer/next-unstable/introduction/introduction"><b>Introduction</b><img src="/composer/next-unstable/assets/img/Caret_SW_2.svg" class="caret"></a></p>

<ul>
<li><a href="/composer/next-unstable/introduction/key-concepts">Key Concepts</a></li>
<li><a href="/composer/next-unstable/introduction/solution-architecture">Typical Solution Architecture</a></li>
</ul></li>
<li><p><a href="/composer/next-unstable/installing/installing-index"><b>Installing</b><img src="/composer/next-unstable/assets/img/Caret_SW_2.svg" class="caret"></a></p>

<ul>
<li><a href="/composer/next-unstable/installing/installing-prereqs">Installing pre-requisites</a></li>
<li><a href="/composer/next-unstable/installing/development-tools">Installing the development environment</a></li>
</ul></li>
<li><p><a href="/composer/next-unstable/tutorials/tutorials"><b>Tutorials</b><img src="/composer/next-unstable/assets/img/Caret_SW_2.svg" class="caret"></a></p>

<ul>
<li><a href="/composer/next-unstable/tutorials/playground-tutorial">Playground Tutorial</a></li>
<li><a href="/composer/next-unstable/tutorials/developer-tutorial">Developer Tutorial</a></li>
<li><a href="/composer/next-unstable/tutorials/queries">Queries Tutorial</a></li>
<li><a href="/composer/next-unstable/tutorials/deploy-to-fabric-single-org">Deploying to a single organization Hyperledger Fabric</a></li>
<li><a href="/composer/next-unstable/tutorials/deploy-to-fabric-multi-org">Deploying to a multi-organization Hyperledger Fabric</a></li>
<li><a href="/composer/next-unstable/tutorials/invoke-composer-network">Invoking a Composer business network from another business network using Hyperledger Fabric</a></li>
<li><a href="/composer/next-unstable/tutorials/acl-trading">Access Control Tutorial - Commodity Trading</a></li>
<li><a href="/composer/next-unstable/tutorials/google_oauth2_rest">Configuring Google OAUTH2.0 Authentication Strategy with a persistent Composer REST server instance</a></li>
</ul></li>
<li><p><a href="/composer/next-unstable/playground/playground-index"><b>Using Playground</b><img src="/composer/next-unstable/assets/img/Caret_SW_2.svg" class="caret"></a></p>

<ul>
<li><a href="/composer/next-unstable/playground/id-cards-playground">Business Network Cards</a></li>
</ul></li>
<li><p><a href="/composer/next-unstable/business-network/business-network-index"><b>Developing Business Networks</b><img src="/composer/next-unstable/assets/img/Caret_SW_2.svg" class="caret"></a></p>

<ul>
<li><a href="/composer/next-unstable/business-network/businessnetworkdefinition">Business Network Definitions</a></li>
<li><a href="/composer/next-unstable/business-network/bnd-create">Create a Business Network Definition</a></li>
<li><a href="/composer/next-unstable/business-network/bnd-deploy">Deploying Business Networks</a></li>
<li><a href="/composer/next-unstable/business-network/publishing-events">Emitting Events</a></li>
<li><a href="/composer/next-unstable/business-network/testing">Testing Business Networks</a></li>
<li><a href="/composer/next-unstable/business-network/bnd-publish">Publish Models or Business Network Definitions</a></li>
<li><a href="/composer/next-unstable/business-network/query">Using Queries and Filters with Business Network Data</a></li>
<li><a href="/composer/next-unstable/business-network/programmatic-access-control">Programmatic access control</a></li>
<li><a href="/composer/next-unstable/business-network/historian">Hyperledger Composer Historian</a></li>
<li><a href="/composer/next-unstable/business-network/cloud-wallets">Customising card stores</a></li>
</ul></li>
<li><p><a href="/composer/next-unstable/applications/applications-index"><b>Developing Applications</b><img src="/composer/next-unstable/assets/img/Caret_SW_2.svg" class="caret"></a></p>

<ul>
<li><a href="/composer/next-unstable/applications/node">Writing a Node.js application</a></li>
<li><a href="/composer/next-unstable/applications/web">Writing Web applications</a></li>
<li><a href="/composer/next-unstable/applications/subscribing-to-events">Subscribing to events</a></li>
</ul></li>
<li><p><a href="/composer/next-unstable/integrating/integrating-index"><b>Integrating Existing Systems</b><img src="/composer/next-unstable/assets/img/Caret_SW_2.svg" class="caret"></a></p>

<ul>
<li><a href="/composer/next-unstable/integrating/getting-started-rest-api">Generating a REST API</a></li>
<li><a href="/composer/next-unstable/integrating/publishing-events">Publishing events from the REST server</a></li>
<li><a href="/composer/next-unstable/integrating/enabling-rest-authentication">Enabling authentication for the REST server</a></li>
<li><a href="/composer/next-unstable/integrating/enabling-multiuser">Enabling multiple user mode for the REST server</a></li>
<li><a href="/composer/next-unstable/integrating/securing-the-rest-server">Securing the REST server using HTTPS and TLS</a></li>
<li><a href="/composer/next-unstable/integrating/deploying-the-rest-server">Deploying the REST server for a business network</a></li>
<li><a href="/composer/next-unstable/integrating/node-red">Integrating with Node-RED</a></li>
<li><a href="/composer/next-unstable/integrating/call-out">Calling external HTTP or REST services</a></li>
</ul></li>
<li><p><a href="/composer/next-unstable/managing/managingindex"><b>Managing a Deployed Business Network</b><img src="/composer/next-unstable/assets/img/Caret_SW_2.svg" class="caret"></a></p>

<ul>
<li><a href="/composer/next-unstable/managing/participantsandidentities">Participants and identities</a></li>
<li><a href="/composer/next-unstable/managing/participant-add">Adding participants</a></li>
<li><a href="/composer/next-unstable/managing/id-cards-playground">Creating, Exporting, and Importing Business Network Cards</a></li>
<li><a href="/composer/next-unstable/managing/identity-issue">Issuing a new identity to a participant</a></li>
<li><a href="/composer/next-unstable/managing/identity-bind">Binding an existing identity to a participant</a></li>
<li><a href="/composer/next-unstable/managing/identity-list">Listing all identities in a business network</a></li>
<li><a href="/composer/next-unstable/managing/identity-revoke">Revoking an identity from a participant</a></li>
<li><a href="/composer/next-unstable/managing/updating-composer">Updating the Hyperledger Composer Runtime</a></li>
<li><a href="/composer/next-unstable/managing/connector-information">Interacting with Hyperledger Fabric</a></li>
</ul></li>
<li><p><a href="/composer/next-unstable/problems/diagnostics"><b>Diagnosing Problems</b><img src="/composer/next-unstable/assets/img/Caret_SW_2.svg" class="caret"></a></p></li>
<li><p><a href="/composer/next-unstable/reference/reference-index"><b>Reference</b><img src="/composer/next-unstable/assets/img/Caret_SW_2.svg" class="caret"></a></p>

<ul>
<li><a href="/composer/next-unstable/reference/MeetTheModules">Hyperledger Composer npm Modules</a></li>
<li><a href="/composer/next-unstable/reference/cto_language">Modeling Language</a></li>
<li><a href="/composer/next-unstable/reference/acl_language">Access Control Language</a></li>
<li><a href="/composer/next-unstable/reference/query-language">Query Language</a></li>
<li><a href="/composer/next-unstable/reference/model-compatibility">Model Compatibility</a></li>
<li><a href="/composer/next-unstable/reference/connectionprofile">Connection Profiles</a></li>
<li><a href="/composer/next-unstable/reference/js_scripts">Transaction Processor Functions</a></li>
<li><a href="/composer/next-unstable/reference/commands">Hyperledger Composer CLI Commands</a></li>
<li><a href="/composer/next-unstable/reference/rest-server">Hyperledger Composer REST Server</a></li>
<li><a href="/composer/next-unstable/reference/glossary">Hyperledger Composer Glossary of Terms</a></li>
</ul></li>
<li><p><a href="/composer/next-unstable/support/support-index"><b>Support</b><img src="/composer/next-unstable/assets/img/Caret_SW_2.svg" class="caret"></a></p></li>
<li><p><a href="/composer/next-unstable/api/api-doc-index"><b>API Reference</b><img src="/composer/next-unstable/assets/img/Caret_SW_2.svg" class="caret"></a></p>

<ul>
<li><a href="/composer/next-unstable/api/allData">API Class Index</a></li>
<li><a href="/composer/next-unstable/api/admin-adminconnection">AdminConnection (Admin API)</a></li>
<li><a href="/composer/next-unstable/api/client-assetregistry">AssetRegistry (Client API)</a></li>
<li><a href="/composer/next-unstable/api/client-businessnetworkconnection">BusinessNetworkConnection (Client API)</a></li>
<li><a href="/composer/next-unstable/api/client-historian">Historian (Client API)</a></li>
<li><a href="/composer/next-unstable/api/client-identityregistry">IdentityRegistry (Client API)</a></li>
<li><a href="/composer/next-unstable/api/client-participantregistry">ParticipantRegistry (Client API)</a></li>
<li><a href="/composer/next-unstable/api/client-query">Query (Client API)</a></li>
<li><a href="/composer/next-unstable/api/client-registry">Registry (Client API)</a></li>
<li><a href="/composer/next-unstable/api/client-transactionregistry">TransactionRegistry (Client API)</a></li>
<li><a href="/composer/next-unstable/api/common-assetdeclaration">AssetDeclaration (Common API)</a></li>
<li><a href="/composer/next-unstable/api/common-businessnetworkcardstore">BusinessNetworkCardStore (Common API)</a></li>
<li><a href="/composer/next-unstable/api/common-businessnetworkdefinition">BusinessNetworkDefinition (Common API)</a></li>
<li><a href="/composer/next-unstable/api/common-businessnetworkmetadata">BusinessNetworkMetadata (Common API)</a></li>
<li><a href="/composer/next-unstable/api/common-classdeclaration">ClassDeclaration (Common API)</a></li>
<li><a href="/composer/next-unstable/api/common-conceptdeclaration">ConceptDeclaration (Common API)</a></li>
<li><a href="/composer/next-unstable/api/common-concept">Concept (Common API)</a></li>
<li><a href="/composer/next-unstable/api/common-enumdeclaration">EnumDeclaration (Common API)</a></li>
<li><a href="/composer/next-unstable/api/common-enumvaluedeclaration">EnumValueDeclaration (Common API)</a></li>
<li><a href="/composer/next-unstable/api/common-eventdeclaration">EventDeclaration (Common API)</a></li>
<li><a href="/composer/next-unstable/api/common-factory">Factory (Common API)</a></li>
<li><a href="/composer/next-unstable/api/common-functiondeclaration">FunctionDeclaration (Common API)</a></li>
<li><a href="/composer/next-unstable/api/common-idcard">IdCard (Common API)</a></li>
<li><a href="/composer/next-unstable/api/common-identifiable">Identifiable (Common API)</a></li>
<li><a href="/composer/next-unstable/api/common-introspector">Introspector (Common API)</a></li>
<li><a href="/composer/next-unstable/api/common-modelfile">ModelFile (Common API)</a></li>
<li><a href="/composer/next-unstable/api/common-modelmanager">ModelManager (Common API)</a></li>
<li><a href="/composer/next-unstable/api/common-participantdeclaration">ParticipantDeclaration (Common API)</a></li>
<li><a href="/composer/next-unstable/api/common-property">Property (Common API)</a></li>
<li><a href="/composer/next-unstable/api/common-relationshipdeclaration">RelationshipDeclaration (Common API)</a></li>
<li><a href="/composer/next-unstable/api/common-relationship">Relationship (Common API)</a></li>
<li><a href="/composer/next-unstable/api/common-resource">Resource (Common API)</a></li>
<li><a href="/composer/next-unstable/api/common-serializer">Serializer (Common API)</a></li>
<li><a href="/composer/next-unstable/api/common-transactiondeclaration">TransactionDeclaration (Common API)</a></li>
<li><a href="/composer/next-unstable/api/common-typed">Typed (Common API)</a></li>
<li><a href="/composer/next-unstable/api/common-validatedconcept">ValidatedConcept (Common API)</a></li>
<li><a href="/composer/next-unstable/api/common-validatedresource">ValidatedResource (Common API)</a></li>
<li><a href="/composer/next-unstable/api/runtime-api">Api (Runtime API)</a></li>
<li><a href="/composer/next-unstable/api/runtime-assetregistry">AssetRegistry (Runtime API)</a></li>
<li><a href="/composer/next-unstable/api/runtime-factory">Factory (Runtime API)</a></li>
<li><a href="/composer/next-unstable/api/runtime-participantregistry">ParticipantRegistry (Runtime API)</a></li>
<li><a href="/composer/next-unstable/api/runtime-query">Query (Runtime API)</a></li>
<li><a href="/composer/next-unstable/api/runtime-serializer">Serializer (Runtime API)</a></li>
</ul></li>
</ul>

            
                <div class="docs-footer-grid">
                <div class="footer-bg-break docs-footer-break">
<div class="footer-container-break">
    <div class="footer-left-break">
      <p>Released under the Apache License v2.0</p>
    </div>
  <div class="footer-right-break">
    <ul>
      <li><a href="https://github.com/hyperledger/composer">GitHub</a></li>
      <li><a href="http://stackoverflow.com/questions/tagged/fabric-composer">Stack Overflow</a></li>
      
      <li><a href="https://hyperledger.github.io/composer/latest">Latest (Unstable) Docs</a></li>
      <li><a href="https://hyperledger.github.io/composer/stable">Stable (Supported) Docs</a></li>
           
    </ul>
  </div>
</div>
</div>

                </div>
          </nav>
        </div>
        <div class="page-content-grid">
          <section class="content-chunk">
            <!-- <a class="toggle open" href="#nav">open</a> -->
            
              <h1 id="overview">Overview</h1>

<p>Hyperledger Composer uses the <a href="https://github.com/winstonjs/winston">Winston</a> framework by default for producing log output. Configuration of this uses the Config framework.</p>

<blockquote>
<p>Please note: Hyperledger Composer is a framework - so your application will need to have it&#39;s own logging framework. Also, your application could also have configuration information to control Hyperledger Composer&#39;s own logging.</p>
</blockquote>

<p>For application level problem diagnosis, it is unlikely that you will need to be very familar with all of the information here. However a basic understanding and ability to enable the default levels of logging will be useful. </p>

<h1 id="diagnosing-issues">Diagnosing Issues</h1>

<p>There are two places or environments where logging takes place</p>

<ul>
<li>the one the application is running in</li>
<li>the chain code container that executes the transaction functions.</li>
</ul>

<h2 id="overview">Overview</h2>

<p>The framework will log information at these levels, as defined by Winston inline with the NPM defaults</p>

<ul>
<li>Error</li>
<li>Warn</li>
<li>Info</li>
<li>Verbose</li>
<li>Debug</li>
</ul>

<p>The code has different levels of logging that can be enabled that are the standard NPM log levels of, Error, Warn, Info, Verbose, Debug, Silly are used. (Silly is used just to be log everything - we don&#39;t have any specific points at this level. Also a None level is used to signify nothing).</p>

<p>Within in the code, log messages are written at a selection of these levels depending on the type of message.  Entry and Exit to functions in the code are logged specifically at the Debug level. </p>

<p>Application side there are two locations where these log messages are written. A text file contain the log messages, and stdout. Within the chaincode container, by default only stdout is used.</p>

<h2 id="control-of-what-is-produced">Control of what is produced</h2>

<p>To control both the location and the type of information that is produced a simple JSON based object configuration is used. The [Config] module is used to help assemble this JSON structure - therefore end user control can be done by environment variables and other formats that Config supports. </p>

<blockquote>
<p>Short cut environment variables are provided to make working with this JSON structure easy!</p>
</blockquote>

<p>With that structure, control can be broke into two parts</p>

<ul>
<li>What level log messages are produced at</li>
<li>Where these messages are sent</li>
</ul>

<h3 id="what-is-produced">What is produced?</h3>

<p>What to log and at what level and components are controlled by the <em>DEBUG</em> control string, as used by many node applications. This is a comma-separated list of components. A single * means everything, and a - sign infront of any component means do *not* log this</p>
<div class="highlight"><pre><code class="language-" data-lang="">DEBUG=&lt;moduleA&gt;,&lt;moduleB&gt;
</code></pre></div>
<p>The string &#39;composer&#39; is used to indetify Hyperledger Composer. For example</p>
<div class="highlight"><pre><code class="language-" data-lang="">DEBUG=express,composer,http
</code></pre></div>
<p>Would log all the composer log points, as well as whatever Express and HTTP wanted to do.
To specifically control the Composer information a string can accept further detail.</p>
<div class="highlight"><pre><code class="language-" data-lang="">DEBUG=composer[tracelevel]:fqn/class/name
</code></pre></div>
<p>The [tracelevel] including the [ ] is optional and defaults to <em>error</em>; the <code>fqn/class/name</code> is dependant on how the code is written and the name of the logger that it requests. (subject for more work later)</p>

<p>Examples are</p>

<ul>
<li><code>composer:*</code> Everything at <em>error</em> level</li>
<li><code>composer[error]:*</code> Everything at <em>error</em> level</li>
<li><code>composer[info]:*</code> Everything at <em>info</em> level</li>
<li><code>composer[info]:BusinessNetworkConnection</code> Solely <em>BusinessNetworkConnection</em> at the <em>info</em> level</li>
<li><code>-composer:BusinessNetworkConnection,composer[error]:*</code> Do not trace anything in the BusinessNetworkConnection class, but do trace anywhere else that has errors. <em>the do not takes effect at all levels of trace</em></li>
</ul>

<blockquote>
<p>The values above are called the <em>debug control string</em></p>
</blockquote>

<h3 id="controlling-where-the-information-goes-to">Controlling where the information goes to</h3>

<h4 id="application-side">Application side</h4>

<p>The details of where the files are written are controlled as follows.</p>

<p>Default settings are:</p>

<ul>
<li>Console has <em>no</em> logging output (the exception being and errors encountered during log setup)</li>
<li>File,  a set of three files, of 1Mb limited in size are written to

<ul>
<li>Location of this is in <code>~/.composer/logs</code></li>
<li>A separate set of files is written on every calendar day.</li>
</ul></li>
</ul>

<p>Each of the console or file can be controlled. These are controlled using the <a href="https://www.npmjs.com/package/config">Config</a> npm module used. Typically this is controlled by using a json file in a <code>config</code> directory in the current working directory. </p>

<p>The structure should be (including an example of application use of the file) would look like</p>
<div class="highlight"><pre><code class="language-" data-lang="">{
  "loadAssets": {
    "cardName": "admin@bsn-local"
  },
  "composer": {
    "log": {
      "debug": "composer[debug]:*",
      "console": {
        "maxLevel": "error"
      },
      "file": {
        "filename" : "./log.txt"
      }
    }
  }
}
</code></pre></div>
<p>This example does several things.
- Debug control string enables debug trace for everything.  Equivalent to the <code>DEBUG=composer[debug]:*</code>
- Enable logging to the console, at the maximum level of error (so just errors)
- And the log file should be in an unlimited file called <code>./log.txt</code> (by default the max log level is set to silly so as to get everything). However as the [debug] is present this pre-filters the log.</p>

<h4 id="shortcuts">Shortcuts</h4>

<p>The config file above, can be specified as a single environment variable on the command line.
<code>
NODE_CONFIG=&#39; { .... JSON HERE  } &#39;
</code></p>

<p>For quick access for logging the following environment variables allow quick, coarse grained access</p>

<ul>
<li><code>COMPOSER_LOGFILE</code> Filename to write the log file to</li>
<li><code>COMPOSER_LOGFILE_SIZE</code> maxsize property - the size per log file. Default = 10Mb</li>
<li><code>COMPOSER_LOGFILE_QTY</code> maxFiles property - the number of log files Default = 100</li>
<li><code>COMPOSER_LOG_CONSOLE</code> Max level to enable for the console, Default is none</li>
</ul>

<h2 id="examples">Examples</h2>

<ul>
<li><code>node app.js</code>  Logs at <em>error</em> to the ~/.composer/logs/log_date.txt</li>
<li><code>DEBUG=composer[info]:* node app.js</code> Logs at <em>info</em> to the ~/.composer/logs/log_date.txt</li>
<li><code>DEBUG=composer[debug]:* COMPOSR_LOGFILE=./log.txt node app.js</code> Logs everything at <em>debug</em> level to the cwd file called <code>log.txt</code></li>
<li><code>COMPOSE_LOG_CONSOLE=error node app.js</code> Log to file and errors to the console</li>
</ul>

<h4 id="chaincode-container">Chaincode Container</h4>

<p>Within the container that is running the chaincode, and therefore the business network transaction functions the logging system is the same. </p>

<p>The major differences are how this is controlled, and where the output is formatted to.</p>

<h5 id="format">Format</h5>

<p>As this is running within a container it is better to output the logs to stdout instead. This is then captured by docker or the container management system. </p>

<p>To achieve this there is a runtime <em>LoggingService</em> that provides a configuration specifically for this purpose. The same framework is therefore used but with a specific configuration.  This is for the <code>composer-runtime-hlfv1</code> defined as being</p>
<div class="highlight"><pre><code class="language-" data-lang="">    getDefaultCfg(){
        return {
            'logger': './winstonInjector.js',
            'debug': 'composer[error]:*',
            'console': {
                'maxLevel': 'silly'

            },
            'file': {
                'maxLevel': 'none'
            },
            'origin':'default-runtime-hlfv1',
        };
    }
</code></pre></div>
<p>This routes all log to the console, none to the file system. The default control string is all errors. </p>

<h5 id="transaction-id">Transaction Id</h5>

<p>An important part of the runtime is the transaction id that is currently being used. This is essential to be able to link together all logs from client, runtime and Fabric. </p>

<p>To achieve this, a <em>callback</em> mechanism is in place to permit the retrieval of data that only the runtime will know at the point in time the log call is made. </p>

<p>This permits the output in the logs to include the transaction id. For example <em>88bae779</em> in this line
<code>
2018-01-16T12:56:58.987Z [88bae779] [INFO    ] @JS : IdentityManager         :&lt;ResourceManager&gt;()      Binding in the tx names and impl 
</code></p>

<h5 id="control">Control</h5>

<p>The same essential control is available and is focused around provision of the &#39;debug control string&#39;. Though within a container there need to be alternative ways to pass this in. Environment variables can be set for example in the docker-compose files. </p>

<p>The &#39;setLogLevel&#39; and &#39;getLogLevel&#39; transactions, can be used to set/get the value of this debug string. The syntax of the string is the same, </p>

<p>For example issuing the command to get the log level in a fresh setup...
```
$&gt; composer network loglevel --card admin@bsn-local<br>
The current logging level is: composer[error]:*</p>

<p>Command succeeded
```</p>

<p>This can then be modified to say include all debug level log points from the TransactionHandler but still errors everywhere else
```
composer network loglevel --card admin@bsn-local -l &quot;composer[debug]:TransactionHandler,composer[error]:<em>&quot;<br>
The logging level was successfully changed to: composer[debug]:TransactionHandler,composer[error]:</em></p>

<p>Command succeeded
```</p>

<h2 id="component-profiles">Component Profiles</h2>

<p>Using the debug string for another other than broad logging, requires a knowledge of what file/class to trace. If you want to take logging from say ACLs, then 
this there is the concept of &#39;profiles&#39;. For example for ACLs, you can enable trace with</p>
<div class="highlight"><pre><code class="language-" data-lang="">DEBUG=composer[debug]:acls
</code></pre></div>
<p>The syntax is the same, but internally &#39;acls&#39; is expanded to a debug string specifically for ACLs. </p>

            
          </section>
        </div>
        <!-- Otherwise, have the main content fill all 12 columns... -->
        
      <div class="PageNavigation">
    
    
  </div>
    </article>
</div>
<script>
(function (document) {
    function clipboard_init() {
        var charts = document.querySelectorAll("div.highlight"),
            arr = [],
            i, j, maxItem, pre, btn, el;

        // Make sure we are dealing with an array
        for(i = 0, maxItem = charts.length; i < maxItem; i++) arr.push(charts[i]);

        // Find the UML source element and get the text
        for (i = 0, maxItem = arr.length; i < maxItem; i++) {
            el = arr[i];
            pre = el.childNodes[0];

            pre.id = "hl_code" + i.toString();
            btn = document.createElement('copy-button');
            btn.appendChild(document.createTextNode('Copy'));
            btn.setAttribute("class", "copy-btn");
            btn.setAttribute("data-clipboard-target", "#hl_code" + i.toString());
            el.insertBefore(btn, pre);
        }
        new Clipboard('.copy-btn');
    };

    function onReady(fn) {
        if (document.addEventListener) {
            document.addEventListener('DOMContentLoaded', fn);
        } else {
            document.attachEvent('onreadystatechange', function() {
                if (document.readyState === 'interactive')
                    fn();
            });
        }
    }

    onReady(function(){
        clipboard_init();
    });
})(document);
</script>
<script src="/composer/next-unstable/assets/js/nav.js"></script>
<script src="/composer/next-unstable/assets/js/search_bar.js"></script>

    

    


  </div>
</body>
</html>
