{#
  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at
  
  http://www.apache.org/licenses/LICENSE-2.0
  
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
#}
<!DOCTYPE html>

<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width">
	<title>Hyperledger Composer Source: composer-runtime/lib/context.js</title>

	<!--[if lt IE 9]>
	<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
	<link type="text/css" rel="stylesheet" href="styles/sunlight.default.css">

	<link type="text/css" rel="stylesheet" href="styles/site.spacelab.css">

</head>

<body>

<div class="navbar navbar-default navbar-fixed-top navbar-inverse">
<div class="container">
	<div class="navbar-header">
		<a class="navbar-brand" href="index.html">Hyperledger Composer</a>
		<button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#topNavigation">
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
        </button>
	</div>
	<div class="navbar-collapse collapse" id="topNavigation">
		<ul class="nav navbar-nav">
			
			<li class="dropdown">
				<a href="modules.list.html" class="dropdown-toggle" data-toggle="dropdown">Modules<b class="caret"></b></a>
				<ul class="dropdown-menu ">
					<li><a href="module-composer-admin.html">composer-admin</a></li><li><a href="module-composer-client.html">composer-client</a></li><li><a href="module-composer-common.html">composer-common</a></li><li><a href="module-composer-runtime.html">composer-runtime</a></li>
				</ul>
			</li>
			
			<li class="dropdown">
				<a href="classes.list.html" class="dropdown-toggle" data-toggle="dropdown">Classes<b class="caret"></b></a>
				<ul class="dropdown-menu ">
					<li><a href="Certificate.html">Certificate</a></li><li><a href="CertificateUtil.html">CertificateUtil</a></li><li><a href="module-composer-admin.AdminConnection.html">composer-admin.AdminConnection</a></li><li><a href="module-composer-client.AssetRegistry.html">composer-client.AssetRegistry</a></li><li><a href="module-composer-client.BusinessNetworkConnection.html">composer-client.BusinessNetworkConnection</a></li><li><a href="module-composer-client.Historian.html">composer-client.Historian</a></li><li><a href="module-composer-client.IdentityRegistry.html">composer-client.IdentityRegistry</a></li><li><a href="module-composer-client.ParticipantRegistry.html">composer-client.ParticipantRegistry</a></li><li><a href="module-composer-client.Query.html">composer-client.Query</a></li><li><a href="module-composer-client.Registry.html">composer-client.Registry</a></li><li><a href="module-composer-client.TransactionRegistry.html">composer-client.TransactionRegistry</a></li><li><a href="module-composer-common.AssetDeclaration.html">composer-common.AssetDeclaration</a></li><li><a href="module-composer-common.BusinessNetworkCardStore.html">composer-common.BusinessNetworkCardStore</a></li><li><a href="module-composer-common.BusinessNetworkDefinition.html">composer-common.BusinessNetworkDefinition</a></li><li><a href="module-composer-common.BusinessNetworkMetadata.html">composer-common.BusinessNetworkMetadata</a></li><li><a href="module-composer-common.ClassDeclaration.html">composer-common.ClassDeclaration</a></li><li><a href="module-composer-common.Concept.html">composer-common.Concept</a></li><li><a href="module-composer-common.ConceptDeclaration.html">composer-common.ConceptDeclaration</a></li><li><a href="module-composer-common.EnumDeclaration.html">composer-common.EnumDeclaration</a></li><li><a href="module-composer-common.EnumValueDeclaration.html">composer-common.EnumValueDeclaration</a></li><li><a href="module-composer-common.EventDeclaration.html">composer-common.EventDeclaration</a></li><li><a href="module-composer-common.Factory.html">composer-common.Factory</a></li><li><a href="module-composer-common.FunctionDeclaration.html">composer-common.FunctionDeclaration</a></li><li><a href="module-composer-common.IdCard.html">composer-common.IdCard</a></li><li><a href="module-composer-common.Identifiable.html">composer-common.Identifiable</a></li><li><a href="module-composer-common.Introspector.html">composer-common.Introspector</a></li><li><a href="module-composer-common.ModelFile.html">composer-common.ModelFile</a></li><li><a href="module-composer-common.ModelManager.html">composer-common.ModelManager</a></li><li><a href="module-composer-common.ParticipantDeclaration.html">composer-common.ParticipantDeclaration</a></li><li><a href="module-composer-common.Property.html">composer-common.Property</a></li><li><a href="module-composer-common.Relationship.html">composer-common.Relationship</a></li><li><a href="module-composer-common.RelationshipDeclaration.html">composer-common.RelationshipDeclaration</a></li><li><a href="module-composer-common.Resource.html">composer-common.Resource</a></li><li><a href="module-composer-common.Serializer.html">composer-common.Serializer</a></li><li><a href="module-composer-common.TransactionDeclaration.html">composer-common.TransactionDeclaration</a></li><li><a href="module-composer-common.Typed.html">composer-common.Typed</a></li><li><a href="module-composer-common.ValidatedConcept.html">composer-common.ValidatedConcept</a></li><li><a href="module-composer-common.ValidatedResource.html">composer-common.ValidatedResource</a></li><li><a href="module-composer-runtime.Api.html">composer-runtime.Api</a></li><li><a href="module-composer-runtime.AssetRegistry.html">composer-runtime.AssetRegistry</a></li><li><a href="module-composer-runtime.Factory.html">composer-runtime.Factory</a></li><li><a href="module-composer-runtime.ParticipantRegistry.html">composer-runtime.ParticipantRegistry</a></li><li><a href="module-composer-runtime.Query.html">composer-runtime.Query</a></li><li><a href="module-composer-runtime.Serializer.html">composer-runtime.Serializer</a></li>
				</ul>
			</li>
			
			<li class="dropdown">
				<a href="global.html" class="dropdown-toggle" data-toggle="dropdown">Global<b class="caret"></b></a>
				<ul class="dropdown-menu ">
					<li><a href="global.html#getLogger">getLogger</a></li><li><a href="global.html#PREFIX">PREFIX</a></li>
				</ul>
			</li>
			
		</ul>
        
            <div class="col-sm-3 col-md-3">
                <form class="navbar-form" role="search">
                    <div class="input-group">
                        <input type="text" class="form-control" placeholder="Search" name="q" id="search-input">
                        <div class="input-group-btn">
                            <button class="btn btn-default" id="search-submit"><i class="glyphicon glyphicon-search"></i></button>
                        </div>
                    </div>
                </form>
            </div>
        
	</div>

</div>
</div>


<div class="container" id="toc-content">
<div class="row">

	
	<div class="col-md-12">
	
		<div id="main">
			{#
  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at
  
  http://www.apache.org/licenses/LICENSE-2.0
  
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
#}


		<h1 class="page-title">Source: composer-runtime/lib/context.js</h1>
    {#
  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at
  
  http://www.apache.org/licenses/LICENSE-2.0
  
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
#}

<section>
    <article>
        <pre
            class="sunlight-highlight-javascript linenums">/*
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

'use strict';

const AclCompiler = require('./aclcompiler');
const AccessController = require('./accesscontroller');
const Api = require('./api');
const IdentityManager = require('./identitymanager');
const Logger = require('composer-common').Logger;
const QueryCompiler = require('./querycompiler');
const RegistryManager = require('./registrymanager');
const ResourceManager = require('./resourcemanager');
const Resolver = require('./resolver');
const TransactionLogger = require('./transactionlogger');

const LOG = Logger.getLog('Context');

/**
 * A class representing the current request being handled by the JavaScript engine.
 * @protected
 * @abstract
 * @memberof module:composer-runtime
 */
class Context {
    /**
     * Constructor.
     * @param {Engine} engine The chaincode engine that owns this context.
     * @param {InstalledBusinessNetwork} installedBusinessNetwork Information associated with the installed business network
     */
    constructor(engine, installedBusinessNetwork) {
        if (!installedBusinessNetwork) {
            throw new Error('No business network specified');
        }

        this.engine = engine;
        this.installedBusinessNetwork = installedBusinessNetwork;
        this.eventNumber = 0;
    }

    /**
     * Get the name of the currently executing runtime method.
     * @return {string} The name of the currently executing runtime method.
     */
    getFunction() {
        return this.function;
    }

    /**
     * Get the arguments for the currently executing runtime method.
     * @return {string} The arguments for the currently executing runtime method.
     */
    getArguments() {
        return this.arguments;
    }

    /**
     * Load the current participant.
     * @return {Promise} A promise that will be resolved with a {@link Resource}
     * when complete, or rejected with an error.
     */
    async loadCurrentParticipant() {
        const method = 'loadCurrentParticipant';
        LOG.entry(method);

        // Load the current identity.
        const identity = await this.getIdentityManager().getIdentity();
        // Validate the identity.
        try {
            this.setIdentity(identity);
            this.getIdentityManager().validateIdentity(identity);
        } catch (e) {
            // Is this an activation transaction?
            let isActivation = false;
            try {
                if (this.getFunction() === 'submitTransaction') {
                    const json = JSON.parse(this.getArguments()[0]);
                    isActivation = json.$class === 'org.hyperledger.composer.system.ActivateCurrentIdentity';
                }
            } catch (e) {
                // Ignore.
            }

            // Check for the case of activation required, and the user is trying to activate.
            if (e.activationRequired &amp;&amp; isActivation) {
                // Don't throw the error as we are activating the identity, but return null
                // so that the participant is not set because there is no current participant
                // until the identity is activated and not revoked.
                LOG.exit(method, null);
                return null;
            } else {
                throw e;
            }
        }

        // Load the current participant.
        const participant = await this.getIdentityManager().getParticipant(identity);

        LOG.exit(method, participant);
        return participant;
    }

    /**
     * Initialize the context for use.
     * @param {Object} [options] The options to use.
     * @param {string} [options.function] The name of the currently executing runtime method.
     * @param {string} [options.arguments] The arguments for the currently executing runtime method.
     * @param {Container} [options.container] The chaincode container in which the transactions is running
     * @param {DataCollection} [options.sysregistries] The system registries collection to use.
     */
    async initialize(options) {
        const method = 'initialize';
        LOG.entry(method, options);

        options = options || {};
        this.function = options.function || this.function;
        this.arguments = options.arguments || this.arguments;
        this.container = options.container;

        LOG.debug(method, 'Loading sysregistries collection', options.sysregistries);
        this.sysregistries = options.sysregistries || await this.getDataService().getCollection('$sysregistries');

        if (options.function === 'init') {
            // No point loading the participant as no participants exist!
            LOG.debug(method, 'Not loading current participant as processing deployment');
        } else {
            LOG.debug(method, 'Loading current participant');
            const participant = await this.loadCurrentParticipant();
            LOG.debug(method, 'Setting current participant', participant);
            this.setParticipant(participant);
        }

        if (this.container) {
            this.loggingService = this.container.getLoggingService();
        }

        this.getSerializer().setDefaultOptions({ permitResourcesForRelationships: true });

        LOG.exit(method);
    }

    /**
     * Get all of the services provided by the chaincode container.
     * @return {Service[]} All of the services provided by the chaincode container.
     */
    getServices() {
        return [
            this.getDataService(),
            this.getEventService(),
            this.getIdentityService(),
            this.getHTTPService()
        ];
    }
    /**
     * Get the container.
     * @return {Container} The container.
     */
    getContainer() {
        return this.container;
    }
    /**
     * Get the data service provided by the chaincode container.
     * @abstract
     * @return {DataService} The data service provided by the chaincode container.
     */
    getDataService() {
        throw new Error('abstract function called');
    }

    /**
     * Get the identity service provided by the chaincode container.
     * @abstract
     * @return {IdentityService} The identity service provided by the chaincode container.
     */
    getIdentityService() {
        throw new Error('abstract function called');
    }

    /**
     * Get the http service provided by the chaincode container.
     * @abstract
     * @return {HTTPService} The http service provided by the chaincode container.
     */
    getHTTPService() {
        throw new Error('abstract function called');
    }

    /**
     * Get the serializer.
     * @return {Serializer} The serializer.
     */
    getSerializer() {
        return this.installedBusinessNetwork.getDefinition().getSerializer();
    }
    /**
     * Get the event service provided by the chaincode container.
     * @abstract
     * @return {EventService} The event service provided by the chaincode container.
     */
    getEventService() {
        throw new Error('abstract function called');
    }

    /**
     * Get the model manager.
     * @return {ModelManager} The model manager.
     */
    getModelManager() {
        return this.installedBusinessNetwork.getDefinition().getModelManager();
    }

    /**
     * Get the script manager.
     * @return {ScriptManager} The script manager.
     */
    getScriptManager() {
        return this.installedBusinessNetwork.getDefinition().getScriptManager();
    }

    /**
     * Get the ACL manager.
     * @return {AclManager} The ACL manager.
     */
    getAclManager() {
        return this.installedBusinessNetwork.getDefinition().getAclManager();
    }

    /**
     * Get the factory.
     * @return {Factory} The factory.
     */
    getFactory() {
        return this.installedBusinessNetwork.getDefinition().getFactory();
    }


    /**
     * Get the introspector.
     * @return {Introspector} The serializer.
     */
    getIntrospector() {
        return this.installedBusinessNetwork.getDefinition().getIntrospector();
    }

    /**
     * Get the registry manager.
     * @return {RegistryManager} The registry manager.
     */
    getRegistryManager() {
        if (!this.registryManager) {
            // TODO: This method call is getting too long.
            this.registryManager = new RegistryManager(
                this.getDataService(),
                this.getIntrospector(),
                this.getSerializer(),
                this.getAccessController(),
                this.getSystemRegistries(),
                this.getFactory());
        }
        return this.registryManager;
    }

    /**
     * Get the resolver.
     * @return {Resolver} The resolver.
     */
    getResolver() {
        if (!this.resolver) {
            this.resolver = new Resolver(this.getFactory(), this.getIntrospector(), this.getRegistryManager());
        }
        return this.resolver;
    }

    /**
     * Get the API.
     * @return {Api} The API.
     */
    getApi() {
        if (!this.api) {
            this.api = new Api(this);
        }
        return this.api;
    }

    /**
     * Get the identity manager.
     * @return {IdentityManager} The identity manager.
     */
    getIdentityManager() {
        if (!this.identityManager) {
            this.identityManager = new IdentityManager(this);
        }
        return this.identityManager;
    }

    /**
     * Get the resource manager.
     * @return {ResourceManager} The resource manager.
     */
    getResourceManager() {
        if (!this.resourceManager) {
            this.resourceManager = new ResourceManager(this);
        }
        return this.resourceManager;
    }

        /**
     * Get the network manager.
     * @return {NetworkManager} The network manager.
     */
    getNetworkManager() {
        if (!this.networkManager) {
            const NetworkManager = require('./networkmanager');
            this.networkManager = new NetworkManager(this);
        }
        return this.networkManager;
    }

    /**
     * Get the current participant.
     * @return {Resource} the current participant.
     */
    getParticipant() {
        return this.participant;
    }

    /**
     * Set the current participant.
     * @param {Resource} participant the current participant.
     */
    setParticipant(participant) {
        if (this.participant) {
            throw new Error('A current participant has already been specified');
        }
        this.participant = participant;
        this.getAccessController().setParticipant(participant);
    }


    /**
     * Get the current identity.
     * @return {Resource} the current identity.
     */
    getIdentity() {
        return this.currentIdentity;
    }

    /**
     * Set the current identity.
     * @param {Resource} currentIdentity the current identity.
     */
    setIdentity(currentIdentity) {
        if (this.currentIdentity) {
            throw new Error('A current identity has already been specified');
        }
        this.currentIdentity = currentIdentity;
    }

    /**
     * Get the current transaction.
     * @return {Resource} the current transaction.
     */
    getTransaction() {
        return this.transaction;
    }

    /**
     * Set the current transaction.
     * @param {Resource} transaction the current transaction.
     */
    setTransaction(transaction) {
        if (this.transaction) {
            throw new Error('A current transaction has already been specified');
        }
        this.transaction = transaction;
        this.transactionLogger = new TransactionLogger(this.transaction, this.getRegistryManager(), this.getSerializer());
        this.getAccessController().setTransaction(transaction);
    }

    /**
     * Clear the current transaction.
     */
    clearTransaction() {
        this.transaction = null;
        this.transactionLogger = null;
        this.getAccessController().setTransaction(null);
    }

    /**
     * Get the access controller.
     * @return {AccessController} The access controller.
     */
    getAccessController() {
        if (!this.accessController) {
            this.accessController = new AccessController(this);
        }
        return this.accessController;
    }

    /**
     * Get the system registries collection.
     * @return {DataCollection} The system registries collection.
     */
    getSystemRegistries() {
        if (!this.sysregistries) {
            throw new Error('must call initialize before calling this function');
        }
        return this.sysregistries;
    }

    /**
     * Get the next event number
     * @return {integer} the event number.
     */
    getEventNumber() {
        return this.eventNumber;
    }

    /**
     * Incrememnt the event number by 1
     * @return {integer} the event number.
     */
    incrementEventNumber() {
        return this.eventNumber++;
    }

    /**
     * Returns the installed business network definition
     * @returns {BusinessNetworkDefinition} business network definition
    */
    getBusinessNetworkDefinition() {
        return this.installedBusinessNetwork.getDefinition();
    }

    /**
     * Get the installed business network as an archive.
     * @return {Buffer} business network archive.
     */
    getBusinessNetworkArchive() {
        return this.installedBusinessNetwork.getArchive();
    }

    /**
     * Get the compiled script bundle.
     * @return {CompiledScriptBundle} compiledScriptBundle The compiled script bundle.
     */
    getCompiledScriptBundle() {
        return this.installedBusinessNetwork.getCompiledScriptBundle();
    }

    /**
     * Get the query compiler.
     * @return {QueryCompiler} queryCompiler The query compiler.
     */
    getQueryCompiler() {
        if (!this.queryCompiler) {
            this.queryCompiler = new QueryCompiler();
        }
        return this.queryCompiler;
    }

    /**
     * Get the compiled query bundle.
     * @return {CompiledQueryBundle} The compiled query bundle.
     */
    getCompiledQueryBundle() {
        return this.installedBusinessNetwork.getCompiledQueryBundle();
    }

    /**
     * Get the ACL compiler.
     * @return {AclCompiler} aclCompiler The ACL compiler.
     */
    getAclCompiler() {
        if (!this.aclCompiler) {
            this.aclCompiler = new AclCompiler();
        }
        return this.aclCompiler;
    }

    /**
     * Get the compiled ACL bundle.
     * @return {CompiledAclBundle} The compiled ACL bundle.
     */
    getCompiledAclBundle() {
        return this.installedBusinessNetwork.getCompiledAclBundle();
    }

    /** Obtains the logging service
     *@return {LoggingService} the logging service
     */
    getLoggingService(){
        return this.loggingService;
    }

    /**
     * Get the list of transaction handlers.
     * @return {TransactionHandler[]} The list of transaction handlers.
     */
    getTransactionHandlers() {
        return [
            this.getIdentityManager(),
            this.getResourceManager(),
            this.getNetworkManager()
        ];
    }

    /**
     * Called at the start of a transaction.
     * @param {boolean} readOnly Is the transaction read-only?
     * @return {Promise} A promise that will be resolved when complete, or rejected
     * with an error.
     */
    transactionStart(readOnly) {
        const services = this.getServices();
        return services.reduce((promise, service) => {
            return promise.then(() => {
                return service.transactionStart(readOnly);
            });
        }, Promise.resolve());
    }

    /**
     * Called when a transaction is preparing to commit.
     * @abstract
     * @return {Promise} A promise that will be resolved when complete, or rejected
     * with an error.
     */
    transactionPrepare() {
        const services = this.getServices();
        return services.reduce((promise, service) => {
            return promise.then(() => {
                return service.transactionPrepare();
            });
        }, Promise.resolve());
    }

    /**
     * Called when a transaction is rolling back.
     * @abstract
     * @return {Promise} A promise that will be resolved when complete, or rejected
     * with an error.
     */
    transactionRollback() {
        const services = this.getServices();
        return services.reduce((promise, service) => {
            return promise.then(() => {
                return service.transactionRollback();
            });
        }, Promise.resolve());
    }

    /**
     * Called when a transaction is committing.
     * @abstract
     * @return {Promise} A promise that will be resolved when complete, or rejected
     * with an error.
     */
    transactionCommit() {
        const services = this.getServices();
        return services.reduce((promise, service) => {
            return promise.then(() => {
                return service.transactionCommit();
            });
        }, Promise.resolve());
    }

    /**
     * Called at the end of a transaction.
     * @abstract
     * @return {Promise} A promise that will be resolved when complete, or rejected
     * with an error.
     */
    transactionEnd() {
        const services = this.getServices();
        return services.reduce((promise, service) => {
            return promise.then(() => {
                return service.transactionEnd();
            });
        }, Promise.resolve());
    }

    /**
     * Get the native api
     * @abstract
     * @return {NativeAPI} the native api for a particular runtime
     */
    getNativeAPI() {
        throw new Error('abstract function called');
    }

}

module.exports = Context;
</pre>
    </article>
</section>





		</div>
	</div>

	<div class="clearfix"></div>

	

</div>
</div>


    <div class="modal fade" id="searchResults">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title">Search results</h4>
          </div>
          <div class="modal-body"></div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
        </div><!-- /.modal-content -->
      </div><!-- /.modal-dialog -->
    </div>


<footer>

	 


	<span class="copyright">
	2017 Copyright IBM Corp. All Rights Reserved
	</span>

<span class="jsdoc-message">
	Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a>
	
		on Fri Apr 27th 2018
	
	using the <a href="https://github.com/docstrap/docstrap">DocStrap template</a>.
</span>
</footer>

<script src="scripts/docstrap.lib.js"></script>
<script src="scripts/toc.js"></script>

    <script type="text/javascript" src="scripts/fulltext-search-ui.js"></script>


<script>
$( function () {
	$( "[id*='$']" ).each( function () {
		var $this = $( this );

		$this.attr( "id", $this.attr( "id" ).replace( "$", "__" ) );
	} );

	$( ".tutorial-section pre, .readme-section pre, pre.prettyprint.source" ).each( function () {
		var $this = $( this );

		var example = $this.find( "code" );
		exampleText = example.html();
		var lang = /{@lang (.*?)}/.exec( exampleText );
		if ( lang && lang[1] ) {
			exampleText = exampleText.replace( lang[0], "" );
			example.html( exampleText );
			lang = lang[1];
		} else {
			var langClassMatch = example.parent()[0].className.match(/lang\-(\S+)/);
			lang = langClassMatch ? langClassMatch[1] : "javascript";
		}

		if ( lang ) {

			$this
			.addClass( "sunlight-highlight-" + lang )
			.addClass( "linenums" )
			.html( example.html() );

		}
	} );

	Sunlight.highlightAll( {
		lineNumbers : true,
		showMenu : true,
		enableDoclinks : true
	} );

	$.catchAnchorLinks( {
        navbarOffset: 10
	} );
	$( "#toc" ).toc( {
		anchorName  : function ( i, heading, prefix ) {
			return $( heading ).attr( "id" ) || ( prefix + i );
		},
		selectors   : "#toc-content h1,#toc-content h2,#toc-content h3,#toc-content h4",
		showAndHide : false,
		smoothScrolling: true
	} );

	$( "#main span[id^='toc']" ).addClass( "toc-shim" );
	$( '.dropdown-toggle' ).dropdown();

    $( "table" ).each( function () {
      var $this = $( this );
      $this.addClass('table');
    } );

} );
</script>



<!--Navigation and Symbol Display-->


<!--Google Analytics-->



    <script type="text/javascript">
        $(document).ready(function() {
            SearcherDisplay.init();
        });
    </script>


</body>
</html>
