<!doctype html>
<html lang="en">
  
  
  

<head>
  <meta charset="utf-8">
  
    <title>Modeling Language | Hyperledger Composer</title>
  
  <meta name="viewport" content="width=device-width">
  <link rel="icon" type="image/x-icon" href="/composer/unstable/favicon.ico">
  <meta name="google-site-verification" content="fBQRJ6h7MV7_TJ7grbgq4P-d-07NRfDWPe4pqEEoH5w">
  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">

  
    <!-- Google Analytics -->
<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-91314349-2', 'auto');
ga('require', 'outboundLinkTracker');
ga('require', 'eventTracker');
ga('send', 'pageview');
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
<script async src="/composer/unstable/assets/js/autotrack.js"></script>
<!-- End Google Analytics -->

  

  
    <link href="/composer/unstable/assets/css/normalize.css" rel="stylesheet">
    <link href="/composer/unstable/assets/css/new-style.min.css" rel="stylesheet">
    <link href="/composer/unstable/assets/css/grid-layout.min.css" rel="stylesheet">
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.6.0/clipboard.min.js"></script>
  
</head>


<body class="">

  
  <!-- % include navbar.html % -->
  

  <div class="SiteWrapper">
    
      <div class="content">
    <article class="docs-container">
        <!-- If there's a sidebar, divide into 2 columns -->
        
        <div class="page-sidebar-grid" id="off-canvas">
          <!-- <a class="toggle close" href="#">close</a> -->
          <div class="docs-pagenav-grid">
            <!-- Navigation -->
  <nav class="navbar-docs" role="navigation">
        <!-- Brand and toggle get grouped for better mobile display -->
            <a class="navbar-brand" href="/composer/unstable/index.html"><b>Hyperledger</b> Composer</a>
        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <div class="top-nav-docs">
                <!-- <li>
                    <a href="services.html">Composer</a>
                </li> -->
                <!-- <li>
                    <a href="https://composer-playground.mybluemix.net/">Playground</a>
                </li> -->
                    <a href="../tutorials/tutorials.html">Tutorials</a>
                    <a href="../introduction/introduction.html">Docs</a>
                    <a href="../support/index.html">Community</a>
            </div>
        </div>
</nav>

          </div>

          <div class="docs-current-page-grid">
          <p>Modeling Language</p>
          </div>

          <nav class="context-nav">
            
            
              <ul>
<li><p><a href="https://hyperledger.github.io/composer//introduction/introduction.html">Introduction</a></p>

<ul>
<li><a href="https://hyperledger.github.io/composer//introduction/key-concepts.html">Key Concepts</a></li>
<li><a href="https://hyperledger.github.io/composer//introduction/solution-architecture.html">Typical Solution Architecture</a></li>
</ul></li>
<li><p><a href="https://hyperledger.github.io/composer//installing/installing-index.html">Installing Index</a></p>

<ul>
<li><a href="https://hyperledger.github.io/composer//installing/getting-started-with-playground.html">Using the Playground online</a></li>
<li><a href="https://hyperledger.github.io/composer//installing/using-playground-locally.html">Installing the Playground locally</a></li>
<li><a href="https://hyperledger.github.io/composer//installing/development-tools.html">Installing a development environment</a></li>
</ul></li>
<li><p><a href="https://hyperledger.github.io/composer//tutorials/tutorials.html">Tutorials Index</a></p>

<ul>
<li><a href="https://hyperledger.github.io/composer//tutorials/playground-guide.html">Playground Guide</a></li>
<li><a href="https://hyperledger.github.io/composer//tutorials/developer-guide.html">Developer Guide</a></li>
</ul></li>
<li><p><a href="https://hyperledger.github.io/composer//business-network/business-network-index.html">Developing Business Networks</a></p>

<ul>
<li><a href="https://hyperledger.github.io/composer//business-network/businessnetworkdefinition.html">Business Network Definitions</a></li>
<li><a href="https://hyperledger.github.io/composer//business-network/bnd-create.html">Create a Business Network Definition</a></li>
<li><a href="https://hyperledger.github.io/composer//business-network/bnd-deploy.html">Deploying and Updating Business Networks</a></li>
<li><a href="https://hyperledger.github.io/composer//business-network/publishing-events.html">Emitting Events</a></li>
<li><a href="https://hyperledger.github.io/composer//business-network/testing.html">Testing Business Networks</a></li>
<li><a href="https://hyperledger.github.io/composer//business-network/bnd-publish.html">Publish Models or Business Network Definitions</a></li>
<li><a href="https://hyperledger.github.io/composer//business-network/query.html">Querying Business Network Data</a></li>
</ul></li>
<li><p><a href="https://hyperledger.github.io/composer//applications/applications-index.html">Developing Applications</a></p>

<ul>
<li><a href="https://hyperledger.github.io/composer//applications/node.html">Writing a Node.js application</a></li>
<li><a href="https://hyperledger.github.io/composer//applications/web.html">Writing Web or mobile applications</a></li>
<li><a href="https://hyperledger.github.io/composer//applications/subscribing-to-events.html">Subscribing to events</a></li>
</ul></li>
<li><p><a href="https://hyperledger.github.io/composer//integrating/integrating-index.html">Integrating Index</a></p>

<ul>
<li><a href="https://hyperledger.github.io/composer//integrating/getting-started-rest-api.html">Generating a REST API</a></li>
<li><a href="https://hyperledger.github.io/composer//integrating/enabling-rest-authentication.html">Enabling REST API authentication for a business network</a></li>
<li><a href="https://hyperledger.github.io/composer//integrating/deploying-the-rest-server.html">Deploying the REST server for a business network</a></li>
<li><a href="https://hyperledger.github.io/composer//integrating/call-out.html">Calling external REST services</a></li>
<li><a href="https://hyperledger.github.io/composer//integrating/node-red.html">Integrating with Node-RED</a></li>
</ul></li>
<li><p><a href="https://hyperledger.github.io/composer//managing/managingindex.html">Managing Index</a></p>

<ul>
<li><a href="https://hyperledger.github.io/composer//managing/participantsandidentities.html">Participants and identities</a></li>
<li><a href="https://hyperledger.github.io/composer//managing/participant-add.html">Adding participants</a></li>
<li><a href="https://hyperledger.github.io/composer//managing/identity-issue.html">Issuing an identity to a participant</a></li>
<li><a href="https://hyperledger.github.io/composer//managing/identity-revoke.html">Revoking the identity of a participant</a></li>
<li><a href="https://hyperledger.github.io/composer//managing/github-oauth.html">Enabling Playground OAuth with GitHub</a></li>
<li><a href="https://hyperledger.github.io/composer//managing/current-participant.html">Implementing participant-based access control</a></li>
<li><a href="https://hyperledger.github.io/composer//managing/updating-composer.html">Updating Hyperledger Composer</a></li>
</ul></li>
<li><p><a href="https://hyperledger.github.io/composer//problems/diagnostics.html">Diagnosing Problems</a></p></li>
<li><p><a href="https://hyperledger.github.io/composer//reference/reference-index.html">Reference Index</a></p>

<ul>
<li><a href="https://hyperledger.github.io/composer//reference/MeetTheModules.html">Hyperledger Composer npm Modules</a></li>
<li><a href="https://hyperledger.github.io/composer//reference/cto_language.html">Modeling Language</a></li>
<li><a href="https://hyperledger.github.io/composer//reference/acl_language.html">Access Control Language</a></li>
<li><a href="https://hyperledger.github.io/composer//reference/query-language.html">Query Language</a></li>
<li><a href="https://hyperledger.github.io/composer//reference/model-compatibility.html">Model Compatibility</a></li>
<li><a href="https://hyperledger.github.io/composer//reference/connectionprofile.html">Connection Profiles</a></li>
<li><a href="https://hyperledger.github.io/composer//reference/js_scripts.html">Transaction Processor Functions</a></li>
<li><a href="https://hyperledger.github.io/composer//reference/commands.html">Hyperledger Composer CLI Commands</a></li>
<li><a href="https://hyperledger.github.io/composer//reference/JSDOC-README.html">API Documentation</a></li>
<li><a href="https://hyperledger.github.io/composer//reference/glossary.html">Hyperledger Composer Glossary of Terms</a></li>
</ul></li>
<li><p><a href="https://hyperledger.github.io/composer//support/.html">Support</a></p></li>
</ul>

            
                <div class="docs-footer-grid">
                <div class="footer-bg-break docs-footer-break">
<div class="footer-container-break">
    <div class="footer-left-break">
      <p>Released under the Apache License v2.0</p>
    </div>
  <div class="footer-right-break">
    <ul>
      <li><a href="https://github.com/hyperledger/composer">GitHub</a></li>
      <!-- <li><a href="https://github.com/hyperledger/composer/LICENSE.txt">Legal</a></li> -->
      <li><a href="/composer/unstable/jsdoc/index.html">APIs</a></li>
      <li><a href="http://stackoverflow.com/questions/tagged/fabric-composer">Stack Overflow</a></li>
      <li><a href="https://goo.gl/forms/7YPMLP2LTN2hjIRk2">Feedback?</a></li>
    </ul>
  </div>
</div>
</div>

                </div>
          </nav>
        </div>
        <div class="page-content-grid">
          <section class="content-chunk">
            <!-- <a class="toggle open" href="#nav">open</a> -->
            
              <h1 id="hyperledger-composer-modeling-language">Hyperledger Composer Modeling Language</h1>

<hr>

<p>Hyperledger Composer includes an Object-Oriented modeling language that is used to define
the domain model for a business network definition.</p>

<p>A Hyperledger Composer CTO file is composed of the following elements:</p>

<ol>
<li>A single namespace. All resource declarations within the file are implicitly
in this namespace.</li>
<li>Optional import declarations that import resources from other namespaces.</li>
<li>A set of resource definitions (see below).</li>
</ol>

<h2 id="imports">Imports</h2>

<p>Use the <code>import</code> keyword with a fully-qualified type name to import a type from another namespace. Alternatively use the <code>.*</code> notation to import all the types from another namespace.</p>
<div class="highlight"><pre><code class="language-" data-lang="">import org.example.MyAsset
import org.example2.*
</code></pre></div>
<h2 id="declarations-of-enumerated-types">Declarations of enumerated types</h2>
<div class="highlight"><pre><code class="language-" data-lang="">/**
* An enumerated type
*/
enum AnimalType {
o SHEEP_GOAT
o CATTLE
o PIG
o DEER_OTHER
}
</code></pre></div>
<h2 id="declarations-of-assets-events-participants-transactions">Declarations of Assets, Events, Participants, Transactions</h2>

<p>Assets, Participants and Transactions are class definitions. The concepts of Asset, Participant and Transaction may be considered to be different stereotypes of the class type.</p>

<p>A class in Hyperledger Composer is referred to as a Resource Definition. Therefore an Asset (instance) has an Asset Definition.</p>

<p>A resource definition has the following properties:</p>

<ol>
<li>A name</li>
<li>A namespace defined by the namespace of its parent file</li>
<li>An identifying field. For example, the Vehicle asset might be identified by
the vin field. Identifying fields must be Strings.</li>
<li>An optional super-type, which the resource definition extends.</li>
<li>An optional &#39;abstract&#39; declaration, to indicate that this type cannot be created</li>
<li>A set of named fields (data owned by the resource, using a has-a relationship)</li>
<li><p>A set of relationships to other Composer types that are not owned by the resource
but that may be referenced from the resource. Relationships are unidirectional.</p>
<div class="highlight"><pre><code class="language-" data-lang="">/**
 * A Field asset. A Field is related to a list of animals
 */
asset Field identified by fieldId {
  o String fieldId
  o String name
  --&gt; Animal[] animals
}
</code></pre></div><div class="highlight"><pre><code class="language-" data-lang="">/**
 * A Farmer participant
 */
participant Farmer identified by farmerId {
    o String farmerId
    o String firstName
    o String lastName
    o String address1
    o String address2
    o String county
    o String postcode
}
</code></pre></div><div class="highlight"><pre><code class="language-" data-lang="">/**
 * An abstract event type
 */
event BasicEvent identified by eventId {
o String eventId
}
</code></pre></div><div class="highlight"><pre><code class="language-" data-lang="">/**
 * An abstract transaction type for animal movements
 */
abstract transaction AnimalMovement identified by transactionId {
  o String transactionId
    --&gt; Animal animal
}
</code></pre></div><div class="highlight"><pre><code class="language-" data-lang="">/**
 * A transaction type for an animal leaving a farm
 */
transaction AnimalMovementDeparture extends AnimalMovement {
  --&gt; Field departureField
}
</code></pre></div></li>
</ol>

<h2 id="hyperledger-composer-system-namespace">Hyperledger Composer System Namespace</h2>

<p>As well as defining new classes of asset, participant, event, and transaction, there is a system namespace which contains the base definitions of asset, event, participant, and transaction. These base definitions are abstracts which are implicitly extended by all assets, events, participants, and transactions.</p>

<p>Represented as a <code>.cto</code> model file, the system namespace is as follows:</p>
<div class="highlight"><pre><code class="language-" data-lang="">    namespace org.hyperledger.composer.system
    abstract asset Asset {  }
    abstract participant Participant {   }
    abstract transaction Transaction identified by transactionId{
      o String transactionId
      o DateTime timestamp
    }
    abstract event Event identified by eventId{
      o String eventId
      o DateTime timestamp
    }
</code></pre></div>
<p>In the system namespace definitions, asset and participant have no required values. Events and transactions are defined by an eventId or transactionId and a timestamp.</p>

<blockquote>
<p>If you have defined an event or transaction including an eventId, transactionId, or timestamp, you must delete the eventId, transactionId, or timestamp properties.</p>
</blockquote>

<h2 id="concepts">Concepts</h2>

<p>Concepts are complex types (classes) that are not assets, participants or transactions. They are typically contained by an asset, participant or transaction.</p>

<p>For example, below an abstract concept <code>Address</code> is defined, and then specialized into a <code>UnitedStatesAddress</code>. Note that concepts do not have an <code>identified by</code> field as they cannot be directly stored in registries or referenced in relationships.</p>
<div class="highlight"><pre><code class="language-" data-lang="">abstract concept Address {
  o String street
  o String city default ="Winchester"
  o String country default = "UK"
  o Integer[] counts optional
}

concept UnitedStatesAddress extends Address {
  o String zipcode
}
</code></pre></div>
<h2 id="primitive-types">Primitive types</h2>

<p>Composer resources are defined in terms of the following primitive types:</p>

<ol>
<li>String : a UTF8 encoded String</li>
<li>Double : a double precision 64 bit numeric value</li>
<li>Integer : a 32 bit signed whole number</li>
<li>Long : a 64 bit signed whole number</li>
<li>DateTime : an ISO-8601 compatible time instance, with optional time zone
and UTZ offset</li>
<li>Boolean : a Boolean value, either true or false.</li>
</ol>

<h2 id="arrays">Arrays</h2>

<p>All types in Composer may be declared as arrays using the [] notation. Hence</p>
<div class="highlight"><pre><code class="language-" data-lang="">Integer[] integerArray
</code></pre></div>
<p>Is an array of Integers stored in a field called &#39;integerArray&#39;. While</p>
<div class="highlight"><pre><code class="language-" data-lang="">--&gt; Animal[] incoming
</code></pre></div>
<p>Is an array of relationships to the Animal type, stored in a field called
&#39;incoming&#39;.</p>

<h2 id="relationships">Relationships</h2>

<p>A relationship in the Composer language is a tuple composed of:</p>

<ol>
<li>The namespace of the type being referenced</li>
<li>The type name of the type being referenced</li>
<li>The identifier of the instance being referenced</li>
</ol>

<p>Hence a relationship could be to:
    org.example.Vehicle#123456</p>

<p>This would be a relationship to the Vehicle type declared in the org.example
namespace with the identifier 123456.</p>

<p>Relationships are unidirectional and deletes do not cascade, ie. removing the relationship has no impact on the thing that is being pointed to. Removing the thing being pointed to does not invalidate the relationship.</p>

<p>Relationships must be <em>resolved</em> to retrieve an instance of the object being
referenced. The act of resolution may result in null, if the object no longer
exists or the information in the relationship is invalid.</p>

<h2 id="field-validators">Field Validators</h2>

<p>String fields may include an optional regular expression, which is used to validate the contents of the field. Careful use of field validators allows Composer to perform rich data validation, leading to fewer errors and less boilerplate code.</p>

<p>The example below declares that the <code>Farmer</code> participant contains a field <code>postcode</code> that must conform to the regular expression for valid UK postcodes.</p>
<div class="highlight"><pre><code class="language-" data-lang="">participant Farmer extends Participant {
    o String firstName default="Old"
    o String lastName default="McDonald"
    o String address1
    o String address2
    o String county
    o String postcode regex=/(GIR 0AA)|((([A-Z-[QVf]][0-9][0-9]?)|(([A-Z-[QVf]][A-Z-[IJZ]][0-9][0-9]?)|(([A-Z-[QVf]][0-9][A-HJKPSTUW])|([A-Z-[QVf]][A-Z-[IJZ]][0-9][ABEHMNPRVWfY])))) [0-9][A-Z-[CIKMOV]]{2})/
}
</code></pre></div>
<p>Double, Long or Integer fields may include an optional range expression, which is used to validate the contents of the field.</p>

<p>The example below declared that the <code>Vehicle</code> asset has an Integer field <code>year</code> which defaults to 2016 and must be 1990, or higher. Range expressions may omit the lower or upper bound if checking is not required.</p>
<div class="highlight"><pre><code class="language-" data-lang="">asset Vehicle extends Base {
  // An asset contains Fields, each of which can have an optional default value
  o String model default="F150"
  o String make default="FORD"
  o String reg default="ABC123"
  // A numeric field can have a range validation expression
  o Integer year default=2016 range=[1990,] optional // model year must be 1990 or higher
  o Integer[] integerArray
  o State state
  o Double value
  o String colour
  o String V5cID regex=/^[A-z][A-z][0-9]{7}/
  o String LeaseContractID
  o Boolean scrapped default=false
  o DateTime lastUpdate optional
  --&gt; Participant owner //relationship to a Participant, with the field named 'owner'.
  --&gt; Participant[] previousOwners optional // Nary relationship
  o Customer customer
}
</code></pre></div>
            
          </section>
        </div>
        <!-- Otherwise, have the main content fill all 12 columns... -->
        
      <div class="PageNavigation">
    
    
  </div>
    </article>
</div>
<script>
(function (document) {
    function clipboard_init() {
        var charts = document.querySelectorAll("div.highlight"),
            arr = [],
            i, j, maxItem, pre, btn, el;

        // Make sure we are dealing with an array
        for(i = 0, maxItem = charts.length; i < maxItem; i++) arr.push(charts[i]);

        // Find the UML source element and get the text
        for (i = 0, maxItem = arr.length; i < maxItem; i++) {
            el = arr[i];
            pre = el.childNodes[0];

            pre.id = "hl_code" + i.toString();
            btn = document.createElement('copy-button');
            btn.appendChild(document.createTextNode('Copy'));
            btn.setAttribute("class", "copy-btn");
            btn.setAttribute("data-clipboard-target", "#hl_code" + i.toString());
            el.insertBefore(btn, pre);
        }
        new Clipboard('.copy-btn');
    };

    function onReady(fn) {
        if (document.addEventListener) {
            document.addEventListener('DOMContentLoaded', fn);
        } else {
            document.attachEvent('onreadystatechange', function() {
                if (document.readyState === 'interactive')
                    fn();
            });
        }
    }

    onReady(function(){
        clipboard_init();
    });
})(document);
</script>
<script src="/composer/unstable/assets/js/nav.js"></script>

    

    


  </div>
</body>
</html>
