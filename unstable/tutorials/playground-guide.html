<!doctype html>
<html lang="en">
  
  
  

<head>
  <meta charset="utf-8">
  
    <title>Tutorial - Using the Playground | Hyperledger Composer</title>
  
  <meta name="viewport" content="width=device-width">
  <link rel="icon" type="image/x-icon" href="/composer/unstable/favicon.ico">
  <meta name="google-site-verification" content="fBQRJ6h7MV7_TJ7grbgq4P-d-07NRfDWPe4pqEEoH5w">
  <link href="//fonts.googleapis.com/css?family=Roboto+Slab:400,700%7CRoboto:400,700,700italic,400italic" rel="stylesheet" type="text/css">
  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
   <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet">
  <script src="/composer/unstable/assets/js/clipboard.min.js"></script>

  
    <!-- Google Analytics -->
<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-91314349-2', 'auto');
ga('require', 'outboundLinkTracker');
ga('require', 'eventTracker');
ga('send', 'pageview');
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
<script async src="/composer/unstable/assets/js/autotrack.js"></script>
<!-- End Google Analytics -->

  

  
    <link href="/composer/unstable/assets/css/normalize.css" rel="stylesheet">
    <link href="/composer/unstable/assets/css/main.css" rel="stylesheet">
    <link href="/composer/unstable/assets/css/footer.css" rel="stylesheet">
    <link href="/composer/unstable/assets/css/prettify.css" rel="stylesheet">
    <link href="/composer/unstable/assets/css/bootstrap.css" rel="stylesheet">
    <link href="/composer/unstable/assets/css/composer-style.css" rel="stylesheet">
    <link href="/composer/unstable/assets/css/new-style.min.css" rel="stylesheet">
  
</head>


<body class="">

  
  <!-- Navigation -->
<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/composer/unstable/index.html"><b>Hyperledger</b> Composer</a>
        </div>
        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- <li>
                    <a href="services.html">Composer</a>
                </li> -->
                <!-- <li>
                    <a href="https://composer-playground.mybluemix.net/">Playground</a>
                </li> -->
                <li>
                    <a href="../tutorials/tutorials.html">Tutorials</a>
                </li>
                <li>
                    <a href="../introduction/introduction.html">Docs</a>
                </li>
                <li>
                    <a href="../support/index.html">Community</a>
                </li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container
   -->
</nav>

  

  <div class="SiteWrapper">
    
      <div class="content">
    <article class="container">
      <div class="row">
        <!-- If there's a sidebar, divide into 2 columns -->
        
        <div class="col-md-3">
          <nav class="context-nav" id="myScrollspy">
            
            
              <p><strong><a href="../introduction/introduction.html">Introduction</a></strong>
<strong><a href="../installing/installing-index.html">Installing</a></strong>
<strong><a href="../tutorials/tutorials.html">Tutorials</a></strong>
<a href="../tutorials/playground-guide.html">Playground Tutorial</a>
<a href="../tutorials/developer-guide.html">Developer Tutorial</a>
<strong><a href="../business-network/business-network-index.html">Developing Business Networks</a></strong>
<strong><a href="../applications/applications-index.html">Developing Applications</a></strong>
<strong><a href="../integrating/integrating-index.html">Integrating Existing Systems</a></strong>
<strong><a href="../managing/managingindex.html">Managing and Operating</a></strong>
<strong><a href="../problems/diagnostics.html">Diagnosing Problems</a></strong>
<strong><a href="../reference/MeetTheModules.html">Reference</a></strong>
<strong><a href="../support/index.html">Support</a></strong></p>

            
          </nav>
        </div>
        <div class="col-md-9">
          <section class="content-chunk">
            
              <h1 id="playground-tutorial">Playground Tutorial</h1>

<hr>

<p>In this step by step tutorial we are going to walk-through setting up a business network definition, testing that business network definition by creating a couple of participants, an asset and submitting a transaction to transfer that asset to a different participant.</p>

<h2 id="step-1-open-the-hyperledger-composer-playground">Step 1: Open the Hyperledger Composer Playground</h2>

<p>Open <a href="http://composer-playground.mybluemix.net" target="blank">Composer Playground</a>, by default the Basic Sample Network is imported.</p>

<p>If you have previously used Playground, be sure to clear your browser local storage by running <code>localStorage.clear()</code> in your browser Console.</p>

<h2 id="step-2-define-your-domain-model">Step 2: Define your Domain Model</h2>

<p>Open the file <strong>Model File</strong> from the left hand side navigation in Playground. This is the domain model for the business network definition. It defines the structure (schema) for the assets, transaction and participants in the business network.</p>

<p>As an example, we&#39;re going to replace the entire contents of the <strong>Model File</strong> with a simplistic model below to track the ownership of commodities on the blockchain.</p>

<p>This will create errors with other files, don&#39;t worry as we&#39;ll fix that! ðŸ˜‰</p>
<div class="highlight"><pre><code class="language-" data-lang="">/**
 * My commodity trading network
 */
namespace org.acme.mynetwork
asset Commodity identified by tradingSymbol {
    o String tradingSymbol
    o String description
    o String mainExchange
    o Double quantity
    --&gt; Trader owner
}
participant Trader identified by tradeId {
    o String tradeId
    o String firstName
    o String lastName
}
transaction Trade identified by transactionId {
    o String transactionId
    --&gt; Commodity commodity
    --&gt; Trader newOwner
}
</code></pre></div>
<p>This domain model defines a single asset <code>Commodity</code> and single participant <code>Trader</code> and a single transaction <code>Trade</code> that is used to modify the owner of a commodity.</p>

<p><em>Note: You can add as many model files as convenient under the <code>models</code> folder, however each model file must have a unique namespace and you can import types from one namespace into other namespaces.</em></p>

<h2 id="step-3-define-transaction-processor-functions">Step 3: Define Transaction Processor Functions</h2>

<p>Now that the domain model has been defined, we can define the business logic for the business network. Composer expresses the logic for a business network using JavaScript functions. These functions are automatically executed when a transaction is submitted for processing.</p>

<p>Open the file <strong>Script File</strong> from the left-hand side navigation and replace the entire contents of this with the function below.</p>
<div class="highlight"><pre><code class="language-" data-lang="">/*
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

/**
 * Track the trade of a commodity from one trader to another
 * @param {org.acme.mynetwork.Trade} trade - the trade to be processed
 * @transaction
 */
function tradeCommodity(trade) {
    trade.commodity.owner = trade.newOwner;
    return getAssetRegistry('org.acme.mynetwork.Commodity')
        .then(function (assetRegistry) {
            return assetRegistry.update(trade.commodity);
        });
}
</code></pre></div>
<p>This function simply changes the <code>owner</code> property on a commodity based on the <code>newOwner</code> property on an incoming <code>Trade</code> transaction. It then persists the modified <code>Commodity</code> back into the asset registry, used to store <code>Commodity</code> instances.</p>

<p><em>Note: You can create as many JavaScript files as convenient for your business network definition. If a JavaScript function has the <code>@transaction</code> annotation, it will be automatically invoked when a transaction of the type defined by the <code>@param</code> annotation is submitted.</em></p>

<h2 id="step-4-define-your-access-control-rules">Step 4: Define your Access Control Rules</h2>

<p>Open the <strong>Access Control</strong> file that defines the access control rules for the business network definition and replace the entire contents with the rule below.</p>
<div class="highlight"><pre><code class="language-" data-lang="">/**
 * Access control rules for mynetwork
 */
rule Default {
    description: "Allow all participants access to all resources"
    participant: "ANY"
    operation: ALL
    resource: "org.acme.mynetwork"
    action: ALLOW
}
</code></pre></div>
<p>This access control simply allows all participants access to all resources.</p>

<h2 id="step-5-deploy-changes">Step 5: Deploy changes</h2>

<p>Using the <strong>Deploy</strong> button in the left hand navigation we need to deploy our changes to the web browser.</p>

<video autoplay "autoplay=autoplay" style="display:block; width:100%; height:auto;" loop="loop">
<source src="/composer/unstable/assets/img/tutorials/playground/deploy_updates_render.mp4" type="video/mp4" />
</video>

<h2 id="step-6-testing-our-business-network-definition">Step 6: Testing our Business Network Definition</h2>

<p>Navigate to the <strong>Test</strong> tab at the top to test our Business Network Definition</p>

<video autoplay "autoplay=autoplay" style="display:block; width:100%; height:auto;" loop="loop">
<source src="/composer/unstable/assets/img/tutorials/playground/test_tab_render.mp4" type="video/mp4" />
</video>

<h2 id="step-7-creating-two-traders">Step 7: Creating two Traders</h2>

<p>Create two &#39;Trader&#39; participants (TRADER1 and TRADER2) by clicking the Trader registry on the left and then the <strong>Create New Participant</strong> button.</p>
<div class="highlight"><pre><code class="language-" data-lang=""><span class="p">{</span><span class="w">
  </span><span class="nt">"$class"</span><span class="p">:</span><span class="w"> </span><span class="s2">"org.acme.mynetwork.Trader"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"tradeId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TRADER1"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Jenny"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Jones"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><div class="highlight"><pre><code class="language-" data-lang=""><span class="p">{</span><span class="w">
  </span><span class="nt">"$class"</span><span class="p">:</span><span class="w"> </span><span class="s2">"org.acme.mynetwork.Trader"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"tradeId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TRADER2"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Amy"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Williams"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<video autoplay "autoplay=autoplay" style="display:block; width:100%; height:auto;" loop="loop">
<source src="/composer/unstable/assets/img/tutorials/playground/create_new_participant_render.mp4" type="video/mp4" />
</video>

<p>After creating these two participants, you should now see them in the participant registry.</p>

<h2 id="step-8-creating-a-commodity">Step 8: Creating a commodity</h2>

<p>Create a new instance of a Commodity by navigating to the Commodity registry on the left and then click the <strong>Create New Asset</strong> button.</p>
<div class="highlight"><pre><code class="language-" data-lang=""><span class="p">{</span><span class="w">
  </span><span class="nt">"$class"</span><span class="p">:</span><span class="w"> </span><span class="s2">"org.acme.mynetwork.Commodity"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"tradingSymbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ABC"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Test commodity"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"mainExchange"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Euronext"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mf">72.297</span><span class="p">,</span><span class="w">
  </span><span class="nt">"owner"</span><span class="p">:</span><span class="w"> </span><span class="s2">"resource:org.acme.mynetwork.Trader#TRADER1"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<video autoplay "autoplay=autoplay" style="display:block; width:100%; height:auto;" loop="loop">
<source src="/composer/unstable/assets/img/tutorials/playground/create_new_asset_render.mp4" type="video/mp4" />
</video>

<p>After creating this asset, you should now see them in the asset registry.</p>

<h2 id="step-9-transferring-that-commodity-between-the-traders">Step 9: Transferring that commodity between the traders</h2>

<p>Next, submit a <code>Trade</code> transaction by clicking the <strong>Submit Transaction</strong> button, bottom left of the left hand navigation panel, to move the commodity from TRADER1 to TRADER2.</p>
<div class="highlight"><pre><code class="language-" data-lang=""><span class="p">{</span><span class="w">
  </span><span class="nt">"$class"</span><span class="p">:</span><span class="w"> </span><span class="s2">"org.acme.mynetwork.Trade"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"commodity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"resource:org.acme.mynetwork.Commodity#ABC"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"newOwner"</span><span class="p">:</span><span class="w"> </span><span class="s2">"resource:org.acme.mynetwork.Trader#TRADER2"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<video autoplay "autoplay=autoplay" style="display:block; width:100%; height:auto;" loop="loop">
<source src="/composer/unstable/assets/img/tutorials/playground/submit_transaction_render.mp4" type="video/mp4" />
</video>

<p>After submitting this transaction, you should now see the transaction in the transaction registry.</p>

<p><img src="../assets/img/tutorials/developer/tx_registry.png" alt="Transaction registry"></p>

<p>As a result, the owner of the commodity ABC should now be owned TRADER2 in the Asset Registry.</p>

<p><img src="../assets/img/tutorials/developer/commodity_registry_after.png" alt="Commodity registry"></p>

<!-- ## Recap!

We defined the business network definition in the **Model File**, **Script File**, **Access Controls**, tested that business network definition by creating a couple of participants `TRADER1` `TRADER2`, an asset `ABC` and submitting a transaction  `Trade` to transfer that asset to a different participant. -->

<h2 id="congratulations-youve-completed-the-playground-tutorial">Congratulations you&#39;ve completed the Playground tutorial!</h2>

<p>Next, you might want to try the <a href="../tutorials/developer-guide.html"><strong>Developer Tutorial</strong></a>, to get your local development environment setup, generate a REST API and a skeleton web application.</p>

<hr>

            
          </section>
        </div>
        <!-- Otherwise, have the main content fill all 12 columns... -->
        
      </div>
      <div class="PageNavigation">
    
    
  </div>
    </article>
</div>

    

    
      <div class="footer-bg docs-footer">
<div class="footer-container">
    <div class="footer-left">
      <p>Released under the Apache License v2.0</p>
    </div>
  <div class="footer-right">
    <ul>
      <li><a href="https://github.com/hyperledger/composer">GitHub</a></li>
      <!-- <li><a href="https://github.com/hyperledger/composer/LICENSE.txt">Legal</a></li> -->
      <li><a href="/composer/unstable/jsdoc/index.html">APIs</a></li>
      <li><a href="http://stackoverflow.com/questions/tagged/fabric-composer">Stack Overflow</a></li>
      <li><a href="https://goo.gl/forms/7YPMLP2LTN2hjIRk2">Feedback?</a></li>
    </ul>
  </div>
</div>
</div>

    


  </div>
</body>

<!-- jQuery -->
<script src="/composer/unstable/assets/js/jquery.js"></script>

<!-- Bootstrap Core JavaScript -->
<script src="/composer/unstable/assets/js/bootstrap.js"></script>

<script>

  $( document ).ready(function() {

      new Clipboard('.btn', {
    text: function() {

        return document.querySelector("[style='display:none;']").value;
    }
});
  });

</script>

</html>
